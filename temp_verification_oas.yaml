openapi: 3.1.0
info:
  title: EBA CLEARING FPAD
  version: '4.1'
  description: FPAD API for interacting with the FPAD functionality for Prevention and Detection assessments.
  contact:
    name: EBA CLEARING
    url: https://www.ebaclearing.eu
  release: v20251212
  filename_pattern: EBACL_FPAD_<current_date>_OpenApi<oas_version>_<customization>FPAD_API_Participant_<api_version>_<release>.yaml
servers:
  - url: /fpad
    description: Server base path
tags:
  - name: Prevention
    description: Fraud prevention operations
  - name: Detection
    description: Fraud detection operations
  - name: Feedback
    description: Risk assessment feedback operations
  - name: EDS
    description: EDS operations
paths:
  /v1/accounts/assessments:
    post:
      summary: Perform Account Assessment
      description: ' This operation creates a risk assessment for an account, identified by an IBAN. It returns the results
        of the risk assessment in a *RiskInfoArray* that provides the outcomes for all the models performed as part of the
        risk assessment.  The requestor can define the list of models that will be performed in the risk assessment. If the
        models are not defined then a default set of models will be performed, and results returned. As FPAD adapts to changing
        transactional behaviour, the returned risk assessment may change for different invocations of the API for the same
        account.'
      operationId: create-account-assessment
      tags:
        - Prevention
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/accounts/assessments/vop:
    post:
      summary: Perform Verification Of Payee (VOP) with Account Assessment
      description: |-
        Performs a simultaneous Account Assessment and Verification of Payee request for an account, identified by an IBAN.

        Account Assessment results provide a RiskInfoArray with the outcomes for the models performed as part of the risk assessment. The requestor can define the list of models that will be performed in the risk assessment.  If the models are not defined then a default set of models will be performed, and results returned.

        Account Assessment results will also provide the Reference Name (Creditor Name) known to FPAD when the party name for the account is present in the request and matches above a defined threshold with the Reference Name known to FPAD.

        As FPAD adapts to changing transactional behaviour, the returned risk assessment may change for different invocations of the API for the same account.

        Verification of Payee (VOP) returns the result of the match between the party name or identification details in the request for the account, identified by the IBAN. Where a name match is performed then in the event of a close match the name of the account holder will be returned.

        FPAD, acting as an RVM, will route the Verification of Payee request to the responding PSP (party agent) directly, if the PSP is using FPAD as RVM, or via the EPC VOP Scheme.
      operationId: create-account-assessment-vop
      tags:
        - Prevention
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/accounts/assessments/vop/bulk:
    post:
      summary: Request a Bulk Verification Of Payee (VOP) with Account Assessment
      description: 'Submits a bulk request for simultaneous Account Assessment and Verification of Payee (VOP) for multiple
        accounts, identified by their IBANs. This is an asynchronous operation that returns only the *bulkId* and the request
        status. The execution progress can be monitored calling the corresponding GET endpoint, which also peovides bulk results
        if the status ia COMPLETED.       '
      operationId: create-account-assessment-vop-bulk
      tags:
        - Prevention
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/accounts/assessments/vop/bulk/{bulkId}:
    get:
      summary: Retrieve a Bulk Verification Of Payee (VOP) with Account Assessment
      description: This operation checks the status of and can retrieve the content of a previously requested Bulk Verification
        Of Payee (VOP) with Account Assessment. It returns a status attribute which provides information about the elaboration
        process and, if its status is COMPLETED, it also returns bulk results. A HATEOAS block of links, included in the response,
        provides the URLs needed to get the first/last/previous/next page of records, when results exceed the number that
        can be returned in a single page.
      operationId: get-account-assessment-vop-bulk
      tags:
        - Prevention
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
        '401':
          Unauthorized:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b401
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
        '403':
          Forbidden:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29a403
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
          Forbidden (application managed):
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b403
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
        '404':
          Not Found:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b404
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
        '409':
          Conflict:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b409
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
        '429':
          Too many requests:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b429
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
        '500':
          Generic Error:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29a500
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
          Generic Error (application managed):
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b500
            x-sandbox-request-path-params:
              bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
      responses:
        default:
          description: Default response
  /vop/v1/payee-verifications:
    post:
      summary: Perform Verification Of Payee (VOP)
      description: |-
        Performs a Verification of Payee (VOP) only request and
        returns the result of the match between the party name or identification details in the request for the account, identified by the IBAN. Where a name match is performed then in the event of a close match the name of the account holder will be returned.

        FPAD, acting as an RVM, will route the Verification of Payee request to the responding PSP (party agent) directly, if the PSP is using FPAD as RVM, or via the EPC VOP Scheme.
      operationId: postVerificationOfPayeeRequests
      tags:
        - Prevention
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['X-Request-ID'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              X-Request-ID: a206e009-ef37-4040-924d-db758b29b400
              X-Request-Timestamp: 2024-08-12T15:19:22.678Z
            x-sandbox-response-body: |
              {
              <#if validationErrors??>
                <#list validationErrors as error>
                "type": "For future use", 
                "code":"FORMAT_ERROR",
                "title": "Bad Request",
                "status": 400,
                "detail": "${error.message}",
                "instance": "https://fpad.ebaclearing.eu/vop/v1/payee-verifications"
                </#list>
              <#else>
                "type": "For future use", 
                "code":"FORMAT_ERROR",
                "title": "Error",
                "status": 400,
                "detail": "Type mismatch",
                "instance": "https://fpad.ebaclearing.eu/vop/v1/payee-verifications"
              </#if>
              }
        '401':
          Client invalid. The Requesting PSP is not correctly authorized to perform the request.:
            x-sandbox-request-headers:
              X-Request-ID: a206e009-ef37-4040-924d-db758b29b401
              X-Request-Timestamp: 2024-08-12T15:19:22.678Z
        '500':
          Internal Server Error. This code is used whenever a technical problem occurred in the application code or application server that prevented the execution of the request.:
            x-sandbox-request-headers:
              X-Request-ID: a206e009-ef37-4040-924d-db758b29b500
              X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      responses:
        default:
          description: Default response
  /v1/transactions/assessments:
    post:
      summary: Create Transaction Assessment
      description: |-
        This operation creates a pre-validation risk assessment for a
        transaction before it is sent for clearing and settlement.

        It returns the results of the risk assessment in a *RiskInfoArray* that provides the outcomes for all the models performed as part of the risk assessment. The requestor can define the list of models that will be performed in the risk assessment. If the models are not defined then a default set of models will be performed, and results returned.

         As FPAD adapts to changing transactional behaviour, the returned risk assessment may change for different invocations of the API for the same account.
      operationId: create-transaction-assessment
      tags:
        - Prevention
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/transactions/investigations:
    get:
      summary: Retrieve Transaction Investigation by Transaction Key
      description: |-
        This operation retrieves a risk assessment for a single pacs.008 SCT or SCT Inst transaction that has been completed in STEP2-T or RT1. It returns a *RiskInfoArray* that provides the outcomes for the models performed at the time that the transaction was received by FPAD.

        The returned result is a static, historical risk assessment that will remain the same across multiple calls for the same transaction. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment. The models cannot be selected as part of the call.

        The *RiskInfoArray* is retrieved through the transaction key elements:
        service Type, debtor agent BIC, transaction ID, reference date.

        If no transaction matching input data is found, an empty body is returned.
      operationId: get-transaction-investigation-by-transaction-key
      tags:
        - Detection
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-request-query-params:
              debtorBic: FPADITMMXXX
              transactionId: 41e400e45
              referenceDateTime: 2023-03-23T14:15:22Z
            x-sandbox-request-name: OK
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/transactions/investigations/{fuid}:
    get:
      summary: Retrieve Transaction Investigation By FUID
      description: |-
        This operation retrieves a risk assessment for a single pacs.008 SCT or SCT Inst transaction that has been completed in STEP2-T or RT1. It returns a *RiskInfoArray* that provides the outcomes for the models performed at the time that the transaction was received by FPAD.

         The returned result is a static, historical risk assessment that will remain the same across multiple calls for the same transaction. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment. The models cannot be selected as part of the call.

        The *RiskInfoArray* is retrieved through the FUID assigned to the
        *RiskInfoArray* during transaction data collection.

        If *fuid* is not found, a 404 error is returned.
      operationId: get-transaction-investigation-by-fuid
      tags:
        - Detection
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
        '401':
          Unauthorized:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b401
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
        '403':
          Forbidden:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29a403
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
          Forbidden (application managed):
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b403
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
        '404':
          Not Found:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b404
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
        '409':
          Conflict:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b409
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
        '429':
          Too many requests:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b429
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
        '500':
          Generic Error:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29a500
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
          Generic Error (application managed):
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b500
            x-sandbox-request-path-params:
              "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
            x-sandbox-request-name: OK
      responses:
        default:
          description: Default response
  /v1/transactions/investigations/reports:
    post:
      summary: Request Transaction Investigation Report
      description: |-
        This operation requests creation of a report that provides the risk
        assessments for multiple pacs.008 SCT or SCT Inst transactions that have been completed in STEP2-T or RT1. It returns a reportId that is then used by the Retrieve Transaction Investigation Report operation to retrieve the request status and and its outcome.

        The request allows several *transactionFilter* parameters to be defined that allow a set of transactions to be selected in the report.
      operationId: create-transaction-investigation-report
      tags:
        - Detection
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/transactions/investigations/reports/{reportId}:
    get:
      summary: Retrieve Transaction Investigation Report
      description: |-
        This operation checks the status of and can retrieve the content of a previously requested Transaction Investigation Report. It returns a status attribute which provides information about the elaboration process and, if its status is COMPLETED, it also returns the report outcome. A HATEOAS block of links, included in the response, provides the URLs needed to get the first/last/previous/next page of records, when transactions exceed the number that can be returned in a single page.

        Report pages provide references to the transactions and the associated *RiskInfoArray* providing the result of the risk assessment performed at the time the that the transaction was received by FPAD. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment.
      operationId: get-transaction-investigation-report
      tags:
        - Detection
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-request-path-params:
              reportId: 7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
        '401':
          Unauthorized:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b401
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
        '403':
          Forbidden:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29a403
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
          Forbidden (application managed):
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b403
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
        '404':
          Not Found:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b404
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
        '409':
          Conflict:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b409
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
        '429':
          Too many requests:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b429
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
        '500':
          Generic Error:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29a500
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
          Generic Error (application managed):
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b500
            x-sandbox-request-path-params:
              "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
      responses:
        default:
          description: Default response
  /v1/risk-info/feedbacks:
    post:
      summary: Provide Feedback
      description: |-
        This operation allows feedback to be provided against the results of an FPAD risk assessment identified by an FPAD Unique ID (FUID). The same API is used to provide feedback on Account Assessment, Transaction Assessment and Transaction Investigation risk assessments. The feedback should reflect the outcome of the risk assessment as determined by the PSP.

        The API can be called multiple times for any FUID allowing the PSP to change the feedback provided to FPAD.
      operationId: create-feedback-by-fuid
      tags:
        - Feedback
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        default:
          description: Default response
  /v1/eds/local-file:
    get:
      summary: Retrieve the EDS local file in the format specified
      description: |-
        This operation returns a ZIP file containing the EDS local file, in the specified format and for the requested date, and its checksum.
        If not specified, the current date is used by default.
        The date must not be more than 8 days prior to the current date.

        If no file is found for the requested date and format, a **204 No Content** response will be returned.
      operationId: get-eds-local-file
      tags:
        - EDS
      parameters: []
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b204") {
            responseName = "No Content" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '204':
          No Content:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b204
            x-sandbox-request-query-params:
              fileFormat: XML
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-request-query-params:
              fileFormat: XML
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
        '401':
          Unauthorized:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b401
            x-sandbox-request-query-params:
              fileFormat: XML
        '403':
          Forbidden:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29a403
            x-sandbox-request-query-params:
              fileFormat: XML
          Forbidden (application managed):
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b403
            x-sandbox-request-query-params:
              fileFormat: XML
        '404':
          Not Found:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b404
            x-sandbox-request-query-params:
              fileFormat: XML
        '409':
          Conflict:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b409
            x-sandbox-request-query-params:
              fileFormat: XML
        '429':
          Too many requests:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b429
            x-sandbox-request-query-params:
              fileFormat: XML
        '500':
          Generic Error:
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29a500
            x-sandbox-request-query-params:
              fileFormat: XML
          Generic Error (application managed):
            x-sandbox-request-headers:
              pri: a206e009-ef37-4040-924d-db758b29b500
            x-sandbox-request-query-params:
              fileFormat: XML
      responses:
        default:
          description: Default response
components:
  parameters:
    senderBic:
      name: senderBic
      in: header
      description: BIC of the participant sending the request.
      required: true
      schema:
        $ref: '#/components/schemas/Bic8'
        description: BIC of the participant sending the request.
        examples:
          - FPADITMM
    pri:
      name: pri
      in: header
      description: Participant Request Identifier - The sender Participant must set this value with an identifier of the request
        that must be unique for the Participant itself.
      required: true
      schema:
        type: string
        description: Participant Request Identifier - The sender Participant must set this value with an identifier of the
          request that must be unique for the Participant itself.
        format: uuid
        examples:
          - a206e009-ef37-4040-924d-db758b2950b2
    fuid:
      name: fuid
      in: path
      description: FPAD Unique Identifier of the risk info evaluation to seek.
      required: true
      schema:
        type: string
        description: FPAD Unique Identifier of the risk info evaluation to seek.
        format: uuid
        examples:
          - 9d356e83-63a7-4763-92fc-52aa7bf4a21f
  headers:
    FpadResponseIdentifier:
      schema:
        type: string
        description: FPAD (API) Response Identifier - A Universal Unique Identifier (UUID) associated by FPAD to the API response.
        format: uuid
        examples:
          - 0d1d7e3a-e2c2-48da-83ff-9920eaad8c93
      description: FPAD (API) Response Identifier - A Universal Unique Identifier (UUID) associated by FPAD to the API response.
    pri:
      schema:
        type: string
        description: Participant Request Identifier - The sender Participant must set this value with an identifier of the
          request that must be unique for the Participant itself.
        format: uuid
        examples:
          - a206e009-ef37-4040-924d-db758b2950b2
      description: Participant Request Identifier - The sender Participant must set this value with an identifier of the request
        that must be unique for the Participant itself.
  schemas:
    AccountType:
      type: object
      title: AccountType
      properties:
        iban:
          $ref: '#/components/schemas/IBANType'
      required:
        - iban
    AgentType:
      type: object
      title: AgentType
      properties:
        financialInstitutionId:
          type: object
          properties:
            bicfi:
              $ref: '#/components/schemas/BICType'
          required:
            - bicfi
      required:
        - financialInstitutionId
    Amount:
      type: number
      description: Standard amount.
      format: double
      maximum: 999999999999.99
      title: Amount
      examples:
        - 1048.27
    AssessmentTransactionData:
      type: object
      description: |
        Structure of a transaction assessment request, with all data of a
        potential transaction that will be evaluated.
      title: AssessmentTransactionData
      properties:
        serviceType:
          $ref: '#/components/schemas/ServiceType'
        transactionId:
          type: string
          description: |
            Unique identifier of the potential transaction which can be set by the sender Participant (It could correspond to the actual Transaction ID,  used in the EBA CLEARING STEP2/RT1 Services if already assigned by the Participant itself at the time of the assessment request).
          maxLength: 35
        debtorName:
          type: string
          description: |
            Name associated with the Debtor's Account present in the potential transaction that has to be assessed.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Debtor's Account present in the
            potential transaction that has to be assessed.
        debtorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN of the debtor
        creditorName:
          type: string
          description: |
            Name associated with the Creditor's Account present in the potential transaction that has to be assessed.
        creditorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Creditor's Account present in the
            potential transaction that has to be assessed.
        creditorIban:
          $ref: '#/components/schemas/Iban'
          description: |
            IBAN identifies the Creditor's Account present in the potential
            transaction that has to be assessed.
        amount:
          $ref: '#/components/schemas/Amount'
          description: Amount of the potential transaction that has to be assessed.
        currency:
          $ref: '#/components/schemas/Currency'
          description: |
            Currency of the Amount of the potential transaction that has to be assessed.
        referenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Reference date and time of the potential transaction that has to be assessed.
            It must me intended as *settlementDate* for SCT and *acceptanceDateTime* for SCTInst services.
        categoryPurpose:
          type: string
          description: |
            Category Purpose of the potential transaction that has to be
            assessed.
          minLength: 4
          maxLength: 4
        purposeCode:
          type: string
          description: Purpose Code of the potential transaction that has to be assessed.
          minLength: 1
          maxLength: 4
      required:
        - serviceType
        - debtorName
        - debtorBic
        - debtorIban
        - creditorName
        - creditorBic
        - creditorIban
        - amount
        - currency
    Bic:
      type: string
      description: Business Identifier Code (BIC) in 8 or 11 characters format.
      pattern: '[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1}'
      title: Bic
      examples:
        - FPADITMMXXX
    Bic8:
      type: string
      description: Business Identifier Code (BIC) in 8 characters format.
      pattern: '[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}'
      minLength: 8
      maxLength: 8
      title: Bic8
      examples:
        - FPADITMM
    BICType:
      type: string
      pattern: ^[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1}$
      title: BICType
      examples:
        - ABCDBEBBFIM
    Currency:
      type: string
      description: ISO 4217 currency code.
      pattern: '[A-Z]{3}'
      title: Currency
      examples:
        - EUR
    DateTime:
      type: string
      description: Timestamp in ISO 8601 format.
      format: date-time
      title: DateTime
      examples:
        - 2019-08-24 14:15:22+00:00
    ErrorResponse:
      type: object
      description: |
        Structure describing FPAD error response, with a mandatory array of
        errors, each one with code, description and the timestamp of when it occurred.
      title: ErrorResponse
      properties:
        errors:
          minItems: 1
          type: array
          items:
            type: object
            properties:
              dateTime:
                $ref: '#/components/schemas/DateTime'
              code:
                type: string
                description: A four character string representing the FPAD error code.
                minLength: 4
                maxLength: 4
              description:
                type: string
                description: A string containing the error description.
            required:
              - dateTime
              - code
              - description
    FpadUniqueIdentifier:
      type: string
      description: FPAD Unique Identifier (a UUID specified by RFC4122).
      format: uuid
      title: FpadUniqueIdentifier
      examples:
        - 4ac04478-d70d-4d25-8bde-f2ad0001093d
    GenericOrganisationIdentification:
      type: object
      description: |
        Usage Rule: the use of either ‘schemeNameCode’ or ‘schemeNameProprietary’ is mandatory when the ‘identification code’ is used.
        Mutual exclusion is verified by business rules executed after the json parsing.
      title: GenericOrganisationIdentification
      properties:
        identification:
          $ref: '#/components/schemas/Max256Text'
          description: Unique and unambiguous identification of an organisation.
        schemeNameCode:
          $ref: '#/components/schemas/OrganisationIdentificationCode'
          description: An entry provided by an external ISO code list.
        schemeNameProprietary:
          $ref: '#/components/schemas/Max35Text'
          description: A scheme name defined in a proprietary way.
        issuer:
          $ref: '#/components/schemas/Max35Text'
          description: Issuer of the identification.
      required:
        - identification
    HateoasBlock:
      type: object
      description: Generic structure of a HATEOAS block.
      title: HateoasBlock
      properties:
        rel:
          type: string
          description: |
            It defines the *relation* (i.e. the description) of the resource retrieved by the *href* attribute.
        href:
          type: string
          description: URI of the related resource.
      required:
        - rel
        - href
      examples:
        - rel: next
          href: |
            /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=2
    Iban:
      type: string
      description: International Bank Account Number (IBAN).
      pattern: '[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}'
      title: Iban
      examples:
        - IT78K0300203280111271851199
    IBANType:
      type: string
      pattern: ^[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}$
      title: IBANType
    InvestigationTransactionData:
      type: object
      description: Basic structure with all key elements of a transaction.
      title: InvestigationTransactionData
      properties:
        instructingAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: |
            BIC of the instructing Agent for the transaction.
        instructedAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: |
            BIC of the instructed Agent for the transaction.
        serviceType:
          $ref: '#/components/schemas/ServiceType'
        transactionId:
          type: string
          description: Unique identifier of the transaction for the participant.
          maxLength: 35
        debtorName:
          type: string
          description: |
            Name associated with the Debtor's Account present in the
            transaction.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Debtor's Account present in the
            transaction.
        debtorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN of the debtor.
        creditorName:
          type: string
          description: |
            Name associated with the Creditor's Account present in the
            transaction.
        creditorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Creditor's Account present in the
            transaction.
        creditorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN identifies the Creditor's Account present in the transaction.
        amount:
          $ref: '#/components/schemas/Amount'
          description: Amount of the transaction.
        currency:
          $ref: '#/components/schemas/Currency'
          description: Currency of the Amount of the transaction.
        referenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Reference date and time of the transaction.
            It must be intended as *settlementDate* for SCT and *acceptanceDtateTime* for SCTInst transactions.
        categoryPurpose:
          type: string
          description: Category Purpose of the transaction.
          minLength: 4
          maxLength: 4
        purposeCode:
          type: string
          description: Purpose Code of the transaction.
          minLength: 1
          maxLength: 4
      required:
        - serviceType
        - transactionId
        - debtorName
        - debtorBic
        - debtorIban
        - creditorName
        - creditorBic
        - creditorIban
        - amount
        - currency
        - referenceDateTime
      examples:
        - instructingAgentBic: FPADITMM
          instructedAgentBic: FPADITMM
          serviceType: SCT
          transactionId: string
          debtorName: string
          debtorBic: FPADITMMXXX
          debtorIban: IT78K0300203280111271851199
          creditorName: string
          creditorBic: FPADITMMXXX
          creditorIban: IT78K0300203280111271851199
          amount: 340.75
          currency: EUR
          referenceDateTime: '2019-08-24T14:15:22Z'
          categoryPurpose: ABCD
          purposeCode: ABCD
    LEIType:
      type: string
      description: Code LEI (Legal Entity Identifier) ISO 17442
      pattern: ^[A-Z0-9]{18}[0-9]{2}$
      title: LEIType
      examples:
        - 549300DTUYXVMJXZNY75
    MessageCode:
      type: string
      enum:
        - FORMAT_ERROR
        - CLIENT_INVALID
        - CLIENT_INCONSISTENT
        - TIMESTAMP_INVALID
      title: MessageCode
    Max35Text:
      type: string
      minLength: 0
      maxLength: 35
      title: Max35Text
    Max70Text:
      type: string
      minLength: 0
      maxLength: 70
      title: Max70Text
    Max140Text:
      type: string
      minLength: 0
      maxLength: 140
      title: Max140Text
    Max256Text:
      type: string
      minLength: 0
      maxLength: 256
      title: Max256Text
    Max500Text:
      type: string
      minLength: 0
      maxLength: 500
      title: Max500Text
    Message:
      type: object
      description: |
        Basic structure for reporting messages. Typically used for providing descriptions about warnings and errors.
      title: Message
      properties:
        messageType:
          type: string
          description: Message type.
          enum:
            - INFO
            - WARNING
            - ERROR
        messageCode:
          type: string
          description: Message code.
        messageText:
          type: string
          description: Full textual description of the message.
      required:
        - messageType
        - messageCode
        - messageText
      examples:
        - messageType: WARNING
          messageCode: W001
          messageText: Partial outcome.
    ModelItem:
      type: object
      description: Structure with elements identifying a model item.
      title: ModelItem
      properties:
        modelName:
          $ref: '#/components/schemas/ModelName'
        modelVersion:
          $ref: '#/components/schemas/ModelVersion'
      required:
        - modelName
    ModelName:
      type: string
      description: |
        It's the name of a specific model. Together with the model version it becomes a unique identifier of a specific model.
      maxLength: 20
      title: ModelName
    ModelVersion:
      type: string
      description: |
        It states the version of model identified by modelName that has been applied.
      maxLength: 15
      title: ModelVersion
    ModelOutcome:
      type: string
      description: |
        Risk assessment Value produced by an applied FPAD's Model that can be provided in the outcome of a Prevention assessment (as part of a RiskInforArray). The format of the Value depends on the type of Model (to consult the structure of the Value produced by an FPAD Model, refer to the specific EBA CLEARING reference documentation).
      maxLength: 10
      title: ModelOutcome
    ModelNarratives:
      type: string
      description: |
        It is an optional attribute that can be provided in addition to the main Model Outcome expected from the result calculation of a Model.
        A *narrative* represents a single machine-readable code or a concatenation of multiple codes separated by the character "+" as a delimiter (e.g. LOWACT+FTMACC, where LOWACT stands for "LOW ACTIVITY" and FTMACC for "First-time account").
        The list of Narrative codes is defined by EBA CLEARING and provided to Participants in the reference documentation.
      maxLength: 120
      title: ModelNarratives
    NameMatchType:
      type: string
      enum:
        - MTCH
        - CMTC
        - NMTC
        - NOAP
      title: NameMatchType
    OrganisationIdentificationCode:
      type: string
      description: Specifies the external organisation identification scheme name code (maximum 4 characters) as defined in
        an external list (iso20022.org).
      enum:
        - BANK
        - CBID
        - CHID
        - CINC
        - COID
        - CUST
        - DUNS
        - EMPL
        - GS1G
        - SREN
        - SRET
        - TXID
        - BDID
        - BOID
      title: OrganisationIdentificationCode
      examples:
        - BOID
    PaginationInfo:
      type: object
      title: PaginationInfo
      properties:
        currentPage:
          type: integer
          description: Current page number.
        totalPages:
          type: integer
          description: Total number of pages, calculated by dividing the total number of reports retrieved by the number of
            items per page applied (rounded up).
        itemsPerPage:
          type: integer
          description: Number of items per page (as requested by the user or applied by default, if not specified).
        links:
          description: |
            HATEOAS block containing references to pagination links: prev, next, first, last, self.
          type: array
          items:
            $ref: '#/components/schemas/HateoasBlock'
      required:
        - currentPage
        - totalPages
        - itemsPerPage
        - links
    PartyIdMatchType:
      type: string
      enum:
        - MTCH
        - NMTC
        - NOAP
      title: PartyIdMatchType
    PartyType:
      type: object
      description: |
        Separation of the two kinds of identification into distinct structures ensures that the two sets of attributes are mutually exclusive.
        Mutual exclusion is verified by business rules executed after the json parsing.
      title: PartyType
      properties:
        name:
          $ref: '#/components/schemas/Max140Text'
        identification:
          type: object
          properties:
            organisationId:
              type: object
              properties:
                lei:
                  $ref: '#/components/schemas/LEIType'
                  description: Legal Entity Identifier.
                anyBIC:
                  $ref: '#/components/schemas/BICType'
                others:
                  description: |
                    Unique identification of an organisation, as assigned by an institution, using an identification scheme.
                    Usage Rule: only one entry to be used.
                  type: array
                  items:
                    $ref: '#/components/schemas/GenericOrganisationIdentification'
          required:
            - organisationId
    Ria:
      type: object
      description: |
        The Ria is a version of *RiskInfoArray* with compact attribute names to save space in bulk requests. It is an array where each item represents an assessed risk for the Account(s) under evaluation, according to the Participant's request. The item model is identified by the *modelName* and the *modelVersion* properties, while the risk assessment is identified by the *value* property.
      title: Ria
      properties:
        name:
          $ref: '#/components/schemas/ModelName'
        ver:
          $ref: '#/components/schemas/ModelVersion'
        out:
          $ref: '#/components/schemas/ModelOutcome'
        narr:
          $ref: '#/components/schemas/ModelNarratives'
      required:
        - name
        - ver
        - out
    RiskInfoArray:
      description: |
        The RiskInfoArray is an array where each item represents an assessed
        risk for the Account(s) under evaluation, according to the Participant's
        request. The item model is identified by the *modelName* and the
        *modelVersion* properties, while the risk assessment is identified by
        the *value* property.
      type: array
      items:
        type: object
        properties:
          modelName:
            $ref: '#/components/schemas/ModelName'
          modelVersion:
            $ref: '#/components/schemas/ModelVersion'
          modelOutcome:
            $ref: '#/components/schemas/ModelOutcome'
          modelNarratives:
            $ref: '#/components/schemas/ModelNarratives'
        required:
          - modelName
      title: RiskInfoArray
    ServiceType:
      type: string
      description: EBA CLEARING Service type (SCT, SCTInst).
      enum:
        - SCT
        - SCTInst
      title: ServiceType
    ShortErrorResponse:
      type: object
      description: |
        Compact version of ErrorResponse structure, used in bulk endpoints.
      title: ShortErrorResponse
      properties:
        xid:
          type: string
          description: The same *xid* sent in the bulk request, for matching purpose.
          format: uuid
        err:
          minItems: 1
          type: array
          items:
            type: object
            properties:
              dt:
                $ref: '#/components/schemas/DateTime'
              code:
                type: string
                description: A four character string representing the FPAD error code.
                minLength: 4
                maxLength: 4
              desc:
                type: string
                description: A string containing the error description.
            required:
              - dt
              - code
              - desc
    ShortMessage:
      type: object
      description: |
        Basic structure for reporting messages. Typically used for providing descriptions about warnings and errors.
      title: ShortMessage
      properties:
        type:
          type: string
          description: Message type.
          enum:
            - INFO
            - WARNING
            - ERROR
        code:
          type: string
          description: Message code.
        text:
          type: string
          description: Full textual description of the message.
      required:
        - type
        - code
        - text
    TransactionInvestigationReportFilter:
      type: object
      description: Data structure user as extraction filter for report request.
      title: TransactionInvestigationReportFilter
      properties:
        instructingAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: BIC of the instructing agent.
        instructedAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: BIC of the instructed agent.
        serviceType:
          $ref: '#/components/schemas/ServiceType'
          description: Service Type of considered transactions.
        transactionId:
          type: string
          description: Unique identifier of the transaction.
          maxLength: 35
        debtorName:
          type: string
          description: |-
            Name associated with the Debtor's Account present in the transaction.
            All transactions starting with the value assigned will be considered.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: |-
            BIC of the Agent managing the Debtor's Account present in the transaction.
            If a 8 characters BIC is assigned as value, all transactions having a debtorBic starting with the same 8 characters will be considered.
        debtorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN of the debtor
        creditorName:
          type: string
          description: |-
            Name associated with the Creditor's Account present in the transaction.
             All transactions starting with the value assigned will be considered.
        creditorBic:
          $ref: '#/components/schemas/Bic'
          description: |-
            BIC of the Agent managing the Creditor's Account present in the transaction.
            If a 8 characters BIC is assigned as value, all transactions having a creditorBic starting with the same 8 characters will be considered.
        creditorIban:
          $ref: '#/components/schemas/Iban'
          description: |
            IBAN identifies the Creditor's Account present in the potential
            transaction that has to be assessed.
        minAmount:
          $ref: '#/components/schemas/Amount'
          description: Minumum amount of the transaction.
        maxAmount:
          $ref: '#/components/schemas/Amount'
          description: Maximum amount of the transaction.
        currency:
          $ref: '#/components/schemas/Currency'
          description: Currency of the Amount of the transaction.
        minReferenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Minimum reference date and time.
            Reference Date Time must be intended as *settlementDate* for SCT and *acceptanceDateTime* for SCTInst.
        maxReferenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Maximum reference date and time. It cannot exceed 3 days from *minReferenceDateTime*.
            Reference Date Time must be intended as *settlementDate* for SCT and *acceptanceDateTime* for SCTInst.
        minGeneralRiskIndicator:
          type: number
          description: |
            Minimum value admitted as General Risk Indicator (model
            *FPAD_RIA_RiskIndicator*).
        maxGeneralRiskIndicator:
          type: number
          description: |
            Maximum value admitted as General Risk Indicator (model
            *FPAD_RIA_RiskIndicator*).
    TransactionKey:
      type: object
      description: Basic structure with all key elements identifìying a transaction.
      title: TransactionKey
      properties:
        serviceType:
          $ref: '#/components/schemas/ServiceType'
          description: EBA CLEARING Service type associated with the transaction.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: BIC of the Agent managing the Debtor's Account.
        transactionId:
          type: string
          description: 'Identifier of the transaction, unique for the Debtor''s Agent. '
          maxLength: 35
        referenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |
            This attribute refers to:

            - Settlement date for SCT service type. If time is provided, it will
            be ignored.

            - Acceptance date and time for SCTInst service type. If time is
            missing, in this case, an error will be returned.
      required:
        - serviceType
        - debtorBic
        - transactionId
        - referenceDateTime
      examples:
        - serviceType: SCT
          debtorBic: FPADITMMXXX
          transactionId: 41e400e45
          referenceDateTime: '2019-08-24T14:15:22Z'
    VerificationOfPayeeResponse:
      type: object
      description: |
        Separation of the two kinds of responses in different structures allows constraints on code identification results and name inclusion.
        Mutual exclusion is verified by business rules executed after the json parsing.
        If the result of partyNameMatch is CMTC, then matchedName is mandatory and can only be used in this case.
      title: VerificationOfPayeeResponse
      properties:
        partyNameMatch:
          $ref: '#/components/schemas/NameMatchType'
        partyIdMatch:
          $ref: '#/components/schemas/PartyIdMatchType'
        matchedName:
          $ref: '#/components/schemas/Max140Text'
    VerificationOfPayeeError:
      type: object
      title: VerificationOfPayeeError
      properties:
        type:
          $ref: '#/components/schemas/Max70Text'
        code:
          $ref: '#/components/schemas/MessageCode'
          description: An entry provided by an external ISO code list.
        title:
          $ref: '#/components/schemas/Max70Text'
        status:
          type: integer
          enum:
            - 400
            - 401
            - 500
        detail:
          $ref: '#/components/schemas/Max500Text'
        instance:
          $ref: '#/components/schemas/Max256Text'
      required:
        - type
        - code
    VerificationOfPayeeRequest:
      type: object
      title: VerificationOfPayeeRequest
      properties:
        party:
          $ref: '#/components/schemas/PartyType'
        partyAccount:
          $ref: '#/components/schemas/AccountType'
        partyAgent:
          $ref: '#/components/schemas/AgentType'
        unstructuredRemittanceInformation:
          description: |
            Additional information about AT-C001 sent by the Requester AT-C007,
            Usage Rule: only one entry may be used.
          type: array
          items:
            $ref: '#/components/schemas/Max140Text'
        requestingAgent:
          $ref: '#/components/schemas/AgentType'
      required:
        - party
        - partyAccount
        - partyAgent
        - requestingAgent
    VopBulkIdentification:
      type: object
      description: This object contains all info about the *identification* block of a VOP bulk request
      title: VopBulkIdentification
      properties:
        lei:
          $ref: '#/components/schemas/LEIType'
          description: Legal Entity Identifier of the party
        bic:
          $ref: '#/components/schemas/BICType'
          description: BIC of the party
        id:
          $ref: '#/components/schemas/Max256Text'
          description: |
            Identification: unique and unambiguous identification of an organisation.
        snc:
          $ref: '#/components/schemas/OrganisationIdentificationCode'
          description: |
            Scheme Name Code: an entry provided by an external ISO code list.
        snp:
          $ref: '#/components/schemas/Max35Text'
          description: |
            Scheme Name Proprietary: a scheme name defined in a proprietary way.
        iss:
          $ref: '#/components/schemas/Max35Text'
          description: Issuer of the identification.
    VopBulkRequest:
      type: object
      description: This object contains all fields to make request for a bulk vop
      title: VopBulkRequest
      properties:
        xid:
          type: string
          description: X-Request-ID used as Requesting PSP’s reference number in the VOP Request (T054).
          format: uuid
        rBic:
          $ref: '#/components/schemas/BICType'
          description: BIC of the requesting agent
        pBic:
          $ref: '#/components/schemas/BICType'
          description: BIC of the party agent
        iban:
          $ref: '#/components/schemas/IBANType'
          description: IBAN of the party account
        name:
          $ref: '#/components/schemas/Max140Text'
          description: Party name
        id:
          description: Party identification (may be used as an alternative to party name, not in combination)
          type: array
          items:
            $ref: '#/components/schemas/VopBulkIdentification'
      required:
        - xid
        - rBic
        - pBic
        - iban
    VopBulkResponse:
      type: object
      description: This object contains the reponse of a get bulk vop
      title: VopBulkResponse
      properties:
        xid:
          type: string
          description: |
            X-Request-ID used as Requesting PSP’s reference number in the VOP Request (T054).
            It can be used to match a request with a response in the bulk request.
          format: uuid
        fuid:
          type: string
          description: FPAD Unique Identifier (a UUID specified by RFC4122).
        fName:
          type: string
          description: FPAD Payee Name.
        ria:
          type: array
          items:
            $ref: '#/components/schemas/Ria'
        vPnm:
          $ref: '#/components/schemas/NameMatchType'
          description: VOP Party Name Match.
        vPim:
          $ref: '#/components/schemas/PartyIdMatchType'
          description: VOP Party Id Match.
        vName:
          $ref: '#/components/schemas/Max140Text'
          description: VOP matched name.
        msgs:
          description: Messages array.
          type: array
          items:
            $ref: '#/components/schemas/ShortMessage'
        vrts:
          type: string
          description: |
            VOP Response Time Stamp: Time stamp of provided by the responding PSP **(T061)**.
          format: date-time
          examples:
            - 2024-08-12 15:19:22.678000+00:00
      required:
        - xid
        - fuid
    VopBulkResponseCounter:
      type: object
      description: Counter for bulk responses having the same matching result.
      title: VopBulkResponseCounter
      properties:
        matchingResult:
          type: string
          description: |
            Matching value for successful responses, "ERROR" for responses returning 4xx/5xx status codes.
          enum:
            - MTCH
            - CMTC
            - NMTC
            - NOAP
            - ERROR
        counter:
          type: integer
          description: Number of responses having the matching value specified in *matchingResult*.
  responses:
    ErrorResponse_401:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Unauthorized:
              value: Unauthorized
    ErrorResponse_403:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Forbidden:
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value: Forbidden
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            Forbidden (application managed):
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value:
                errors:
                  - dateTime: 2023-07-20 14:15:22+00:00
                    code: E403
                    description: The provided sender BIC is not authorized to perform this action.
    ErrorResponse_404:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Not Found:
              value: Not Found
    ErrorResponse_409:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            Conflict:
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value:
                errors:
                  - dateTime: 2023-07-20 14:15:22+00:00
                    code: E409
                    description: The same PRI has already been sent.
    ErrorResponse_429:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Too many requests:
              value: Too many requests
    ErrorResponse_500:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Generic Error:
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value: Internal Server Error
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            Generic Error (application managed):
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value:
                errors:
                  - dateTime: 2023-07-20 14:15:22+00:00
                    code: E500
                    description: Application error.
