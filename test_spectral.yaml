openapi: 3.1.0
info:
  title: EBA CLEARING FPAD
  version: '4.1'
  description: |
    FPAD API for interacting with the FPAD functionality for Prevention and
    Detection assessments.
  contact:
    name: EBA CLEARING
    url: https://www.ebaclearing.eu
servers:
  - url: /fpad
    description: Server base path
tags:
  - name: Prevention
    description: Fraud prevention operations
  - name: Detection
    description: Fraud detection operations
  - name: Feedback
    description: Risk assessment feedback operations
  - name: EDS
    description: EDS operations
paths:
  /v1/accounts/assessments:
    post:
      summary: Perform Account Assessment
      description: |
        This operation creates a risk assessment for an account, identified by an IBAN.
        It returns the results of the risk assessment in a *RiskInfoArray* that provides the outcomes for all the models performed as part of the risk assessment.  The requestor can define the list of models that will be performed in the risk assessment. If the models are
        not defined then a default set of models will be performed, and results returned.

        As FPAD adapts to changing transactional behaviour, the returned risk
        assessment may change for different invocations of the API for the same
        account.
      operationId: create-account-assessment
      tags:
        - Prevention
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                accountName:
                  type: string
                  description: Name associated with the Account has to be assessed.
                accountBic:
                  $ref: '#/components/schemas/Bic'
                accountIban:
                  $ref: '#/components/schemas/Iban'
                requestedModels:
                  type: array
                  items:
                    $ref: '#/components/schemas/ModelItem'
                  description: |
                    Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*. If no array is provided, all available models will be applied.
              required:
                - accountBic
                - accountIban
            examples:
              OK:
                value:
                  accountBic: FPADITMMXXX
                  accountIban: IT02E0300203280782375262458
                  accountName: Mario Rossi
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
              Bad Request:
                value:
                  accountBic: FPADITMMXXX
                  accountName: Mario Rossi
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                    accountName: Mario Rossi
                    riskInfoArray:
                      - modelName: Model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.56
            fuid:
              schema:
                $ref: '#/components/schemas/FpadUniqueIdentifier'
            accountName:
              schema:
                type: string
                description: |
                  FPAD's higher-ranked Creditor Name associated with the Creditor IBAN. It is only returned when the submitted Creditor Name is not too different from the FPAD higher-ranked Creditor Name (for the correct
                  interpretation of which, please refer to the specific EBA CLEARING reference documentation).
            riskInfoArray:
              schema:
                $ref: '#/components/schemas/RiskInfoArray'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'accountIban' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/accounts/assessments/vop:
    post:
      summary: Perform Verification Of Payee (VOP) with Account Assessment
      description: |
        Performs a simultaneous Account Assessment and Verification of Payee request for an account, identified by an IBAN.

        Account Assessment results provide a RiskInfoArray with the outcomes for the models performed as part of the risk assessment. The requestor can define the list of models that will be performed in the risk assessment.  If the models are not defined then a default set of models will be performed, and results returned.

        Account Assessment results will also provide the Reference Name (Creditor Name) known to FPAD when the party name for the account is present in the request and matches above a defined threshold with the Reference Name known to FPAD.

        As FPAD adapts to changing transactional behaviour, the returned risk assessment may change for different invocations of the API for the same account.

        Verification of Payee (VOP) returns the result of the match between the party name or identification details in the request for the account, identified by the IBAN. Where a name match is performed then in the event of a close match the name of the account holder will be returned.

        FPAD, acting as an RVM, will route the Verification of Payee request to the responding PSP (party agent) directly, if the PSP is using FPAD as RVM, or via the EPC VOP Scheme.
      operationId: create-account-assessment-vop
      tags:
        - Prevention
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
        - name: X-Request-Timestamp
          in: header
          description: |
            Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
          required: true
          schema:
            type: string
            description: |
              Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
            format: date-time
            examples:
              - 2024-08-12 15:19:21.123000+00:00
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                accountAssessment:
                  type: object
                  properties:
                    requestedModels:
                      type: array
                      items:
                        $ref: '#/components/schemas/ModelItem'
                      description: |
                        Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*. If no array is provided, all available models will be applied.
                vop:
                  type: object
                  properties:
                    party:
                      $ref: '#/components/schemas/PartyType'
                    partyAccount:
                      $ref: '#/components/schemas/AccountType'
                    partyAgent:
                      $ref: '#/components/schemas/AgentType'
                    unstructuredRemittanceInformation:
                      type: array
                      items:
                        $ref: '#/components/schemas/Max140Text'
                      description: |
                        Additional information about AT-C001 sent by the Requester AT-C007,
                        Usage Rule: only one entry may be used.
                    requestingAgent:
                      $ref: '#/components/schemas/AgentType'
                  required:
                    - party
                    - partyAccount
                    - partyAgent
                    - requestingAgent
              required:
                - vop
            examples:
              OK:
                value:
                  accountAssessment:
                    requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model2
                        modelVersion: '1.0'
                  vop:
                    party:
                      name: John Doe
                    partyAccount:
                      iban: IT76L0300203280825973665778
                    partyAgent:
                      financialInstitutionId:
                        bicfi: BICEXAMPLE1
                    requestingAgent:
                      financialInstitutionId:
                        bicfi: BICEXAMPLE2
              Bad Request:
                value:
                  accountAssessment:
                    requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model2
                        modelVersion: '1.0'
                  vop:
                    party:
                      name: John Doe
                    partyAccount:
                      iban: IT76L0300203280825973665778
                    partyAgent:
                      financialInstitutionId:
                        bicfi: BICEXAMPLE1
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
            pri:
              $ref: '#/components/headers/pri'
            X-Response-Timestamp:
              schema:
                type: string
                format: date-time
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    accountAssessment:
                      fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                      fpadPayeeName: John Edward Doe
                      riskInfoArray:
                        - modelName: Model1
                          modelVersion: 1.0
                          modelOutcome: HIGH
                        - modelName: Model2
                          modelVersion: 1.0
                          modelOutcome: 0.56
                    vop:
                      partyNameMatch: CMTC
                      matchedName: John Edward Doe
            accountAssessment: {}
            fuid:
              schema:
                $ref: '#/components/schemas/FpadUniqueIdentifier'
            fpadPayeeName:
              schema:
                type: string
                description: |
                  FPAD's higher-ranked Creditor Name associated with the account IBAN. It is only returned when the submitted Payee Name is not too different from the FPAD higher-ranked Creditor Name (for the correct interpretation of which, please refer to the specific EBA CLEARING reference documentation).
            riskInfoArray:
              schema:
                $ref: '#/components/schemas/RiskInfoArray'
            vop:
              schema:
                $ref: '#/components/schemas/VerificationOfPayeeResponse'
            messages:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Message'
                description: |
                  This is an array of messages containing additional information, warnings and errors concerning the results provided in the response.
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
            X-Response-Timestamp:
              schema:
                type: string
                format: date-time
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'requestingAgent' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/accounts/assessments/vop/bulk:
    post:
      summary: Request a Bulk Verification Of Payee (VOP) with Account Assessment
      description: |
        Submits a bulk request for simultaneous Account Assessment and Verification of Payee (VOP) for multiple accounts, identified by their IBANs. This is an asynchronous operation that returns only the *bulkId* and the request status. The execution progress can be monitored calling the corresponding GET endpoint, which also peovides bulk results if the status ia COMPLETED.
      operationId: create-account-assessment-vop-bulk
      tags:
        - Prevention
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
        - name: X-Request-Timestamp
          in: header
          description: |
            Timestamp of the Bulk Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
          required: true
          schema:
            type: string
            description: |
              Timestamp of the Bulk Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
            format: date-time
            examples:
              - 2024-08-12 15:19:21.123000+00:00
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                requestedModels:
                  type: array
                  items:
                    $ref: '#/components/schemas/ModelItem'
                  description: |
                    Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*. If no array is provided, all available models will be applied.
                reqs:
                  type: array
                  items:
                    $ref: '#/components/schemas/VopBulkRequest'
              required:
                - reqs
            examples:
              OK:
                value:
                  reqs:
                    - iban: IT60X0542811101000000123456
                      name: Cristopher Sylvester
                      pBic: PTYAGBICXXX
                      rBic: REQAGBICXXX
                      xid: 123e4567-e89b-12d3-a456-426614174000
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
              Bad Request:
                value:
                  reqs:
                    - iban: IT60X0542811101000000123456
                      name: Cristopher Sylvester
                      xid: 123e4567-e89b-12d3-a456-426614174000
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
            pri:
              $ref: '#/components/headers/pri'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    bulkId: beec059e-58bd-40b5-871b-65b3855eb2b0
                    status: PENDING
            bulkId:
              schema:
                type: string
                description: The unique identifier of the bulk request.
                format: uuid
            status:
              schema:
                type: string
                description: |
                  Specifies the progress status of the bulk request.
                enum:
                  - PENDING
                  - ERROR
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'bulkId' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/accounts/assessments/vop/bulk/{bulkId}:
    get:
      summary: Retrieve a Bulk Verification Of Payee (VOP) with Account Assessment
      description: |
        This operation checks the status of and can retrieve the content of a previously requested Bulk Verification Of Payee (VOP) with Account Assessment. It returns a status attribute which provides information about the elaboration process and, if its status is COMPLETED, it also returns bulk results. A HATEOAS block of links, included in the response, provides the URLs needed to get the first/last/previous/next page of records, when results exceed the number that can be returned in a single page.
      operationId: get-account-assessment-vop-bulk
      tags:
        - Prevention
      parameters:
        - name: bulkId
          in: path
          description: Unique identifier of the bulk request.
          required: true
          schema:
            type: string
            description: Unique identifier of the bulk request.
            format: uuid
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
        - name: page
          in: query
          description: |
            Report page number requested.
            If this page does not exist, an error will be returned.
            If this parameter is not provided, the first page will be returned.
          required: false
          schema:
            type: integer
            description: |
              Report page number requested.
              If this page does not exist, an error will be returned.
              If this parameter is not provided, the first page will be returned.
        - name: itemsPerPage
          in: query
          description: |
            Number of items per page requested.
            If this number exeeds the maximum allowed by the system configuration, an error will be returned.
            If this parameter is not provided, the maximum allowed number of items per pages will be applied.
          required: false
          schema:
            type: integer
            description: |
              Number of items per page requested.
              If this number exeeds the maximum allowed by the system configuration, an error will be returned.
              If this parameter is not provided, the maximum allowed number of items per pages will be applied.
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
              '401':
                Unauthorized:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b401
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
              '403':
                Forbidden:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                Forbidden (application managed):
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b403
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
              '404':
                Not Found:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b404
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
              '409':
                Conflict:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b409
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
              '429':
                Too many requests:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b429
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
              '500':
                Generic Error:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                Generic Error (application managed):
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b500
      x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      x-sandbox-request-path-params:
                          bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  x-sandbox-request-path-params:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                  value:
                    bulkId: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                    status: COMPLETED
                    counters:
                      - matchingResult: CMTC
                        counter: 1
                    outcome:
                      - xid: 27587f4f-0a5b-459b-93f6-e87de1e8496d
                        fuid: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                        fName: John Alexander Doe
                        ria:
                          - name: R_ReferenceNameMatch
                            ver: 1.0
                            out: 0
                            narr: RNMANK
                        vPnm: CMTC
                        vName: John Alexander Doe
                        vrts: 2024-08-12 15:19:22.678000+00:00
            bulkId:
              schema:
                type: string
                description: Unique identifier of the bulk request.
                format: uuid
            status:
              schema:
                type: string
                description: |
                  Specifies the progress status of the bulk request.
                enum:
                  - PENDING
                  - COMPLETED
                  - ERROR
            counters:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VopBulkResponseCounter'
                description: Set of counters for VOP responses by match result. All counters are related to the whole bulk
                  set, not to the single page retrieved.
            outcome:
              schema:
                type: array
                items: {}
            pagination:
              schema:
                $ref: '#/components/schemas/PaginationInfo'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'status' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '404':
          description: Structure describing FPAD error response for HTTP code 404.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Not Found:
                  value: Not Found
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /vop/v1/payee-verifications:
    post:
      summary: Perform Verification Of Payee (VOP)
      description: |
        Performs a Verification of Payee (VOP) only request and
        returns the result of the match between the party name or identification details in the request for the account, identified by the IBAN. Where a name match is performed then in the event of a close match the name of the account holder will be returned.

        FPAD, acting as an RVM, will route the Verification of Payee request to the responding PSP (party agent) directly, if the PSP is using FPAD as RVM, or via the EPC VOP Scheme.
      operationId: postVerificationOfPayeeRequests
      tags:
        - Prevention
      parameters:
        - name: X-Request-ID
          in: header
          description: The Requesting PSP's reference number of the VOP Request
          required: true
          schema:
            type: string
            description: The Requesting PSP's reference number of the VOP Request
            format: uuid
        - name: X-Request-Timestamp
          in: header
          description: |
            Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
          required: true
          schema:
            type: string
            description: |
              Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
            format: date-time
            examples:
              - 2024-08-12 15:19:21.123000+00:00
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                party:
                  $ref: '#/components/schemas/PartyType'
                partyAccount:
                  $ref: '#/components/schemas/AccountType'
                partyAgent:
                  $ref: '#/components/schemas/AgentType'
                unstructuredRemittanceInformation:
                  type: array
                  items:
                    $ref: '#/components/schemas/Max140Text'
                  description: |
                    Additional information about AT-C001 sent by the Requester AT-C007,
                    Usage Rule: only one entry may be used.
                requestingAgent:
                  $ref: '#/components/schemas/AgentType'
              required:
                - party
                - partyAccount
                - partyAgent
                - requestingAgent
            examples:
              OK:
                value:
                  party:
                    name: John Doe
                  partyAccount:
                    iban: IT76L0300203280825973665778
                  partyAgent:
                    financialInstitutionId:
                      bicfi: BICEXAMPLE1
                  requestingAgent:
                    financialInstitutionId:
                      bicfi: BICEXAMPLE2
              Bad Request:
                value:
                  party:
                    name: John Doe
                  partyAccount:
                    iban: IT76L0300203280825973665778
                  partyAgent:
                    financialInstitutionId:
                      bicfi: BICEXAMPLE1
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['X-Request-ID'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b400
                    X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      x-sandbox-response-body: |
                    {
                    <#if validationErrors??>
                      <#list validationErrors as error>
                      "type": "For future use", 
                      "code":"FORMAT_ERROR",
                      "title": "Bad Request",
                      "status": 400,
                      "detail": "${error.message}",
                      "instance": "https://fpad.ebaclearing.eu/vop/v1/payee-verifications"
                      </#list>
                    <#else>
                      "type": "For future use", 
                      "code":"FORMAT_ERROR",
                      "title": "Error",
                      "status": 400,
                      "detail": "Type mismatch",
                      "instance": "https://fpad.ebaclearing.eu/vop/v1/payee-verifications"
                    </#if>
                    }
              '401':
                Client invalid. The Requesting PSP is not correctly authorized to perform the request.:
      x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b401
                    X-Request-Timestamp: 2024-08-12T15:19:22.678Z
              '500':
                Internal Server Error. This code is used whenever a technical problem occurred in the application code or application server that prevented the execution of the request.:
      x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b500
                    X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      x-sandbox-request-headers:
                          X-Request-ID: a206e009-ef37-4040-924d-db758b29b200
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      x-sandbox-request-headers:
                          X-Request-ID: a206e009-ef37-4040-924d-db758b29b400
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      x-sandbox-request-headers:
                          X-Request-ID: a206e009-ef37-4040-924d-db758b29b401
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      x-sandbox-request-headers:
                          X-Request-ID: a206e009-ef37-4040-924d-db758b29b500
                          X-Request-Timestamp: 2024-08-12T15:19:22.678Z
      responses:
        '200':
          description: A verification code and the actual name if the code is CMTC
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                format: date-time
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b200
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    partyNameMatch: CMTC
                    matchedName: John Edward Doe
            partyNameMatch:
              schema:
                $ref: '#/components/schemas/NameMatchType'
            partyIdMatch:
              schema:
                $ref: '#/components/schemas/PartyIdMatchType'
            matchedName:
              schema:
                $ref: '#/components/schemas/Max140Text'
        '400':
          description: Malformed payload
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                format: date-time
          content:
            application/json:
              examples:
                Bad Request:
                  x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b400
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    type: ERROR
                    code: FORMAT_ERROR
                    title: Bad Rquest
                    status: 400
                    detail: The payload is malformed.
                    instance: https://fpad.ebaclearing.eu/vop/v1/payee-verifications
            type:
              schema:
                $ref: '#/components/schemas/Max70Text'
            code:
              schema:
                allOf:
                  - $ref: '#/components/schemas/MessageCode'
                description: An entry provided by an external ISO code list.
            title:
              schema:
                $ref: '#/components/schemas/Max70Text'
            status:
              schema:
                type: integer
                enum:
                  - 400
                  - 401
                  - 500
            detail:
              schema:
                $ref: '#/components/schemas/Max500Text'
            instance:
              schema:
                $ref: '#/components/schemas/Max256Text'
        '401':
          description: Client invalid. The Requesting PSP is not correctly authorized to perform the request.
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                format: date-time
          content:
            application/json:
              examples:
                Unauthorized:
                  x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b401
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    type: ERROR
                    code: CLIENT_INVALID
                    title: Unauthorized
                    status: 400
                    detail: The client is not authenticated or authorized.
                    instance: https://fpad.ebaclearing.eu/vop/v1/payee-verifications
            type:
              schema:
                $ref: '#/components/schemas/Max70Text'
            code:
              schema:
                allOf:
                  - $ref: '#/components/schemas/MessageCode'
                description: An entry provided by an external ISO code list.
            title:
              schema:
                $ref: '#/components/schemas/Max70Text'
            status:
              schema:
                type: integer
                enum:
                  - 400
                  - 401
                  - 500
            detail:
              schema:
                $ref: '#/components/schemas/Max500Text'
            instance:
              schema:
                $ref: '#/components/schemas/Max256Text'
        '500':
          description: Internal Server Error. This code is used whenever a technical problem occurred in the application code
            or application server that prevented the execution of the request.
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                format: date-time
          content:
            application/json:
              examples:
                Generic Error:
                  x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b500
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    type: ERROR
                    code: CLIENT_INCONSISTENT
                    title: Internal Server error
                    status: 500
                    detail: An error occurred while executing the service.
                    instance: https://fpad.ebaclearing.eu/vop/v1/payee-verifications
            type:
              schema:
                $ref: '#/components/schemas/Max70Text'
            code:
              schema:
                allOf:
                  - $ref: '#/components/schemas/MessageCode'
                description: An entry provided by an external ISO code list.
            title:
              schema:
                $ref: '#/components/schemas/Max70Text'
            status:
              schema:
                type: integer
                enum:
                  - 400
                  - 401
                  - 500
            detail:
              schema:
                $ref: '#/components/schemas/Max500Text'
            instance:
              schema:
                $ref: '#/components/schemas/Max256Text'
  /v1/transactions/assessments:
    post:
      summary: Create Transaction Assessment
      description: |
        This operation creates a pre-validation risk assessment for a
        transaction before it is sent for clearing and settlement.

        It returns the results of the risk assessment in a *RiskInfoArray* that provides the outcomes for all the models performed as part of the risk assessment. The requestor can define the list of models that will be performed in the risk assessment. If the models are not defined then a default set of models will be performed, and results returned.

        As FPAD adapts to changing transactional behaviour, the returned risk assessment may change for different invocations of the API for the same account.
      operationId: create-transaction-assessment
      tags:
        - Prevention
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                transactionData:
                  $ref: '#/components/schemas/AssessmentTransactionData'
                requestedModels:
                  type: array
                  items:
                    $ref: '#/components/schemas/ModelItem'
                  description: |
                    Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*. If no array is provided, all available models will be applied.
              required:
                - transactionData
            examples:
              OK:
                value:
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model5
                      modelVersion: '1.1'
                  transactionData:
                    amount: 1000
                    categoryPurpose: ABCD
                    creditorBic: FPFPDEMM441
                    creditorIban: DE89370400440532013000
                    creditorName: Eric Mulder
                    currency: EUR
                    debtorBic: FPADITMMXXX
                    debtorIban: IT02E0300203280782375262458
                    debtorName: Mario Rossi
                    purposeCode: ABCD
                    referenceDateTime: '2023-03-23T14:15:22Z'
                    serviceType: SCTInst
                    transactionId: 41e400e45
              Bad Request:
                value:
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model5
                      modelVersion: '1.1'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                    riskInfoArray:
                      - modelName: Model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.99
            fuid:
              schema:
                $ref: '#/components/schemas/FpadUniqueIdentifier'
            riskInfoArray:
              schema:
                $ref: '#/components/schemas/RiskInfoArray'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'transactionData' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/transactions/investigations:
    get:
      summary: Retrieve Transaction Investigation by Transaction Key
      description: |
        This operation retrieves a risk assessment for a single pacs.008 SCT or SCT Inst transaction that has been completed in STEP2-T or RT1. It returns a *RiskInfoArray* that provides the outcomes for the models performed at the time that the transaction was received by FPAD.

        The returned result is a static, historical risk assessment that will remain the same across multiple calls for the same transaction. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment. The models cannot be selected as part of the call.

        The *RiskInfoArray* is retrieved through the transaction key elements:
        service Type, debtor agent BIC, transaction ID, reference date.

        If no transaction matching input data is found, an empty body is returned.
      operationId: get-transaction-investigation-by-transaction-key
      tags:
        - Detection
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
        - name: serviceType
          in: query
          description: EBA CLEARING Service Type (SCT, SCTInst).
          required: true
          schema:
            $ref: '#/components/schemas/ServiceType'
            description: EBA CLEARING Service Type (SCT, SCTInst).
        - name: debtorBic
          in: query
          description: BIC of the Debtor's Agent.
          required: true
          schema:
            $ref: '#/components/schemas/Bic'
            description: BIC of the Debtor's Agent.
        - name: transactionId
          in: query
          description: Identifier of the transaction, unique for the Debtor's Agent.
          required: true
          schema:
            type: string
            description: Identifier of the transaction, unique for the Debtor's Agent.
            maxLength: 35
        - name: referenceDateTime
          in: query
          description: |
            It must match with settlementDate for SCT and acceptanceDateTime for SCTInst services.
          required: true
          schema:
            type: string
            description: |
              It must match with settlementDate for SCT and acceptanceDateTime for SCTInst services.
            format: date-time
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
                  x-sandbox-request-query-params:
                    debtorBic: FPADITMMXXX
                    transactionId: 41e400e45
                    referenceDateTime: 2023-03-23T14:15:22Z
                  x-sandbox-request-name: OK
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
                        x-sandbox-request-query-params:
                          serviceType: SCT
                          debtorBic: FPADITMMXXX
                          transactionId: 41e400e45
                          referenceDateTime: 2023-03-23T14:15:22Z
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  x-sandbox-request-query-params:
                    serviceType: SCT
                    debtorBic: FPADITMMXXX
                    transactionId: 41e400e45
                    referenceDateTime: 2023-03-23 14:15:22+00:00
                  value:
                    fuid: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                    transactionData:
                      instructingAgentBic: FPADITMM
                      instructedAgentBic: FPADITMM
                      serviceType: SCTInst
                      transactionId: 41e400e45
                      debtorName: Mario Rossi
                      debtorBic: FPADITMMXXX
                      debtorIban: IT02E0300203280782375262458
                      creditorName: Eric Mulder
                      creditorBic: FPFPDEMM441
                      creditorIban: DE89370400440532013000
                      amount: 1000
                      currency: EUR
                      referenceDateTime: 2023-03-23 14:15:22+00:00
                      categoryPurpose: ABCD
                      purposeCode: ABCD
                    riskInfoArray:
                      - modelName: Model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.99
            fuid:
              schema:
                $ref: '#/components/schemas/FpadUniqueIdentifier'
            transactionData:
              schema:
                $ref: '#/components/schemas/InvestigationTransactionData'
            riskInfoArray:
              schema:
                $ref: '#/components/schemas/RiskInfoArray'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Parameter 'serviceType' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/transactions/investigations/{fuid}:
    get:
      summary: Retrieve Transaction Investigation By FUID
      description: |
        This operation retrieves a risk assessment for a single pacs.008 SCT or SCT Inst transaction that has been completed in STEP2-T or RT1. It returns a *RiskInfoArray* that provides the outcomes for the models performed at the time that the transaction was received by FPAD.

        The returned result is a static, historical risk assessment that will remain the same across multiple calls for the same transaction. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment. The models cannot be selected as part of the call.

        The *RiskInfoArray* is retrieved through the FUID assigned to the
        *RiskInfoArray* during transaction data collection.

        If *fuid* is not found, a 404 error is returned.
      operationId: get-transaction-investigation-by-fuid
      tags:
        - Detection
      parameters:
        - name: fuid
          in: path
          description: FPAD Unique Identifier of the risk info evaluation to seek.
          required: true
          schema:
            type: string
            description: FPAD Unique Identifier of the risk info evaluation to seek.
            format: uuid
            examples:
              - 9d356e83-63a7-4763-92fc-52aa7bf4a21f
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
              '401':
                Unauthorized:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b401
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
              '403':
                Forbidden:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29a403
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
                Forbidden (application managed):
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b403
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
              '404':
                Not Found:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b404
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
              '409':
                Conflict:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b409
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
              '429':
                Too many requests:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b429
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
              '500':
                Generic Error:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29a500
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
                Generic Error (application managed):
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b500
      x-sandbox-request-path-params:
                    "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
                  x-sandbox-request-name: OK
      x-sandbox-request-path-params:
                          "fuid": "4ac04478-d70d-4d25-8bde-f2ad0001093d"
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
      responses:
        '200':
          description: OK
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-path-params:
                    fuid: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                    transactionData:
                      instructingAgentBic: FPADITMM
                      instructedAgentBic: FPADITMM
                      serviceType: SCTInst
                      transactionId: 41e400e45
                      debtorName: Mario Rossi
                      debtorBic: FPADITMMXXX
                      debtorIban: IT02E0300203280782375262458
                      creditorName: Eric Mulder
                      creditorBic: FPFPDEMM441
                      creditorIban: DE89370400440532013000
                      amount: 1000
                      currency: EUR
                      referenceDateTime: 2023-03-23 14:15:22+00:00
                      categoryPurpose: ABCD
                      purposeCode: ABCD
                    riskInfoArray:
                      - modelName: Model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.99
            fuid:
              schema:
                $ref: '#/components/schemas/FpadUniqueIdentifier'
            transactionData:
              schema:
                $ref: '#/components/schemas/InvestigationTransactionData'
            riskInfoArray:
              schema:
                $ref: '#/components/schemas/RiskInfoArray'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Parameter 'senderBic' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '404':
          description: Structure describing FPAD error response for HTTP code 404.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Not Found:
                  value: Not Found
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/transactions/investigations/reports:
    post:
      summary: Request Transaction Investigation Report
      description: |
        This operation requests creation of a report that provides the risk
        assessments for multiple pacs.008 SCT or SCT Inst transactions that have been completed in STEP2-T or RT1. It returns a reportId that is then used by the Retrieve Transaction Investigation Report operation to retrieve the request status and and its outcome.

        The request allows several *transactionFilter* parameters to be defined that allow a set of transactions to be selected in the report.
      operationId: create-transaction-investigation-report
      tags:
        - Detection
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reportName:
                  type: string
                  description: A name for the requested report assigned by the caller.
                transactionFilter:
                  $ref: '#/components/schemas/TransactionInvestigationReportFilter'
              required:
                - transactionFilter
            examples:
              OK:
                value:
                  transactionFilter:
                    currency: EUR
                    debtorIban: IT78K0300203280111271851199
                    instructingAgentBic: FPADITMM
                    maxReferenceDateTime: '2023-05-02T23:59:59Z'
                    minAmount: 1000
                    minReferenceDateTime: '2023-05-01T00:00:00Z'
                    serviceType: SCT
              Bad Request:
                value:
                  reportName: Test
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
      responses:
        '202':
          description: Accepted
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    reportId: 9afffb1a-f8bb-4345-bda4-f6e97d50cba8
            reportId:
              schema:
                type: string
                description: Unique identifier for the requested report.
                format: uuid
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'transactionFilter' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/transactions/investigations/reports/{reportId}:
    get:
      summary: Retrieve Transaction Investigation Report
      description: |
        This operation checks the status of and can retrieve the content of a previously requested Transaction Investigation Report. It returns a status attribute which provides information about the elaboration process and, if its status is COMPLETED, it also returns the report outcome. A HATEOAS block of links, included in the response, provides the URLs needed to get the first/last/previous/next page of records, when transactions exceed the number that can be returned in a single page.

        Report pages provide references to the transactions and the associated *RiskInfoArray* providing the result of the risk assessment performed at the time the that the transaction was received by FPAD. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment.
      operationId: get-transaction-investigation-report
      tags:
        - Detection
      parameters:
        - name: reportId
          in: path
          description: Unique identifier for a requested report.
          required: true
          schema:
            type: string
            description: Unique identifier for a requested report.
            format: uuid
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
        - name: page
          in: query
          description: |
            Report page number requested.

            If this page does not exist, an error will be returned.

            If this parameter is not provided, the first page will be returned.
          required: false
          schema:
            type: integer
            description: |
              Report page number requested.

              If this page does not exist, an error will be returned.

              If this parameter is not provided, the first page will be returned.
        - name: itemsPerPage
          in: query
          description: |
            Number of items per page requested.

            If this number exeeds the maximum allowed by the system configuration, an error will be returned.

            If this parameter is not provided, the maximum allowed number of items per pages will be applied.
          required: false
          schema:
            type: integer
            description: |
              Number of items per page requested.

              If this number exeeds the maximum allowed by the system configuration, an error will be returned.

              If this parameter is not provided, the maximum allowed number of items per pages will be applied.
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-request-path-params:
                    reportId: 7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
              '401':
                Unauthorized:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b401
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
              '403':
                Forbidden:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29a403
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
                Forbidden (application managed):
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b403
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
              '404':
                Not Found:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b404
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
              '409':
                Conflict:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b409
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
              '429':
                Too many requests:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b429
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
              '500':
                Generic Error:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29a500
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
                Generic Error (application managed):
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b500
      x-sandbox-request-path-params:
                    "reportId": "7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c"
      x-sandbox-request-path-params:
                          reportId: 7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-path-params:
                    reportId: 7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    reportId: 836df459-dc40-4aa1-972a-6eb0a864dff9
                    reportRequestDateTime: 2019-08-24 14:15:22+00:00
                    reportProcessingDateTime: 2019-08-24 14:15:22+00:00
                    status: COMPLETED
                    outcome:
                      - fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                        transactionKey:
                          serviceType: SCT
                          debtorBic: FPADITMMXXX
                          transactionId: 41e400e45
                          referenceDateTime: 2019-08-24 14:15:22+00:00
                        debtorIban: IT02E0300203280782375262458
                        creditorIban: DE89370400440532013000
                        amount: 1000
                        currency: EUR
                        riskInfoArray:
                          - modelName: Model1
                            modelVersion: 1.0
                            modelOutcome: HIGH
                          - modelName: Model2
                            modelVersion: 1.0
                            modelOutcome: 0.56
                    pagination:
                      currentPage: 1
                      totalPages: 1
                      itemsPerPage: 100
                      links:
                        - rel: self
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=1
                        - rel: next
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=2
                        - rel: first
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=1
                        - rel: last
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=15
            reportId:
              schema:
                type: string
                description: Unique identifier for the requested report.
                format: uuid
            reportRequestDateTime:
              schema:
                type: string
                description: Date and time of the report request.
                format: date-time
            reportProcessingDateTime:
              schema:
                type: string
                description: |
                  Date and time at which the report request has been
                  processed.
                format: date-time
            status:
              schema:
                type: string
                enum:
                  - REQUESTED
                  - COMPLETED
                  - ERROR
            outcome:
              schema:
                description: |
                  This object contains the report outcome. It is present obly if the report status is COMPLETED.
                type: array
                items:
                  type: object
            fuid:
              schema:
                $ref: '#/components/schemas/FpadUniqueIdentifier'
            transactionKey:
              schema:
                $ref: '#/components/schemas/TransactionKey'
            debtorIban:
              schema:
                $ref: '#/components/schemas/Iban'
            creditorBic:
              schema:
                $ref: '#/components/schemas/Bic'
            creditorIban:
              schema:
                $ref: '#/components/schemas/Iban'
            amount:
              schema:
                $ref: '#/components/schemas/Amount'
            currency:
              schema:
                $ref: '#/components/schemas/Currency'
            riskInfoArray:
              schema:
                $ref: '#/components/schemas/RiskInfoArray'
            messages:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Message'
                description: |
                  This is an array of messages containing warnings and
                  errors encountered during the report generation process.
            pagination:
              schema:
                $ref: '#/components/schemas/PaginationInfo'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Parameter 'senderBic' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '404':
          description: Structure describing FPAD error response for HTTP code 404.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Not Found:
                  value: Not Found
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/risk-info/feedbacks:
    post:
      summary: Provide Feedback
      description: |
        This operation allows feedback to be provided against the results of an FPAD risk assessment identified by an FPAD Unique ID (FUID). The same API is used to provide feedback on Account Assessment, Transaction Assessment and Transaction Investigation risk assessments. The feedback should reflect the outcome of the risk assessment as determined by the PSP.
        The API can be called multiple times for any FUID allowing the PSP to change the feedback provided to FPAD.
      operationId: create-feedback-by-fuid
      tags:
        - Feedback
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: Structure of a FPAD assessment feedback request.
              properties:
                feedbackType:
                  type: string
                  description: |
                    Feedback type:

                    - TRXASS: Prevention - Transaction assessment

                    - ACCASS: Prevention - Account assessment

                    - TRXINV: Detection - Transaction investigation (settled transactions evaluated during the data collecting phase)
                  enum:
                    - TRXASS
                    - ACCASS
                    - TRXINV
                fuid:
                  $ref: '#/components/schemas/FpadUniqueIdentifier'
                feedbackValue:
                  type: string
                  description: |
                    Feedback value provided for the risk info evaluation
                    identified by its FUID. The Feedback Value fields decode to the following:

                    - HIGHRISK  The risk assessment referenced by the FUID is considered high risk.

                    - LOWRISK  The risk assessment referenced by the FUID is considered low risk.

                    - NOFEEDBACK  It was not possible to determine a risk
                    outcome for the risk assessment referenced by the FUID.

                    - IGNORE  The risk outcome, and any previously submitted risk outcomes, for the risk assessment referenced by the FUID should be ignored.
                  enum:
                    - HIGHRISK
                    - LOWRISK
                    - NOFEEDBACK
                    - IGNORE
              required:
                - feedbackType
                - fuid
                - feedbackValue
            examples:
              OK:
                value:
                  feedbackType: TRXASS
                  feedbackValue: LOWRISK
                  fuid: 4ac04478-d70d-4d25-8bde-f2ad0009999d
              Bad Request:
                value:
                  feedbackType: NOTYPE
                  feedbackValue: LOWRISK
                  fuid: 4ac04478-d70d-4d25-8bde-f2ad0009999d
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value: null
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Value 'NOTYPE' is not defined in the schema.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Unauthorized:
                  value: Unauthorized
        '403':
          description: Structure describing FPAD error response for HTTP code 403.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Forbidden:
                  x-sandbox-response-name: Forbidden
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  value: Forbidden
        '409':
          description: Structure describing FPAD error response for HTTP code 409.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Conflict:
                  value:
                    errors:
                      - dateTime: 2023-07-20 14:15:22+00:00
                        code: E409
                        description: The same PRI has already been sent.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '429':
          description: Structure describing FPAD error response for HTTP code 429.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Too many requests:
                  value: Too many requests
        '500':
          description: Structure describing FPAD error response for HTTP code 500.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
                type: string
                description: Error message
              examples:
                Generic Error:
                  x-sandbox-response-name: Generic Error
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  value: Internal Server Error
  /v1/eds/local-file:
    get:
      summary: Retrieve the EDS local file in the format specified
      description: |
        This operation returns a ZIP file containing the EDS local file, in the specified format and for the requested date, and its checksum.
        If not specified, the current date is used by default.
        The date must not be more than 8 days prior to the current date.

        If no file is found for the requested date and format, a **204 No Content** response will be returned.
      operationId: get-eds-local-file
      tags:
        - EDS
      parameters:
        - name: senderBic
          in: header
          description: BIC of the participant sending the request.
          required: true
          schema:
            $ref: '#/components/schemas/Bic8'
            description: BIC of the participant sending the request.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: |
            Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
          required: true
          schema:
            type: string
            description: |
              Participant Request Identifier - The sender Participant must set this value with an identifier of the request that must be unique for the Participant itself.
            format: uuid
            examples:
              - a206e009-ef37-4040-924d-db758b2950b2
        - name: fileFormat
          in: query
          description: The requested format of the EDS local file.
          required: true
          schema:
            type: string
            description: The requested format of the EDS local file.
            enum:
              - XML
              - CSV
              - JSON
        - name: fileDate
          in: query
          description: |
            The date for which the EDS Local File is required.
            If not specified, the current date is used by default.
            The specified date must not be earlier than 8 days before the current date.
          required: false
          schema:
            type: string
            description: |
              The date for which the EDS Local File is required.
              If not specified, the current date is used by default.
              The specified date must not be earlier than 8 days before the current date.
            format: date
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
              var responseName = "OK";
              var pri = camelHeaders['pri'];
              if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
                  responseName = "Bad Request" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b204") {
                  responseName = "No Content" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
                  responseName = "Unauthorized" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
                  responseName = "Forbidden" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
                  responseName = "Forbidden (application managed)" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
                  responseName = "Not Found" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
                  responseName = "Conflict" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
                  responseName = "Too many requests" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
                  responseName = "Generic Error" ;
              }
              else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
                  responseName = "Generic Error (application managed)" ;
              }
              else if (!!validationErrors && validationErrors.length > 0) {
                  responseName = "Bad Request" ;
              }
              responseName;
      x-sandbox-response-extension:
              '204':
                No Content:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b204
                  x-sandbox-request-query-params:
                    fileFormat: XML
              '400':
                Bad Request:
      x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b29b400
                  x-sandbox-request-query-params:
                    fileFormat: XML
      x-sandbox-response-body: |
                    {
                      "errors": [
                        <#if validationErrors??>
                          <#list validationErrors as error>
                            {
                              "dateTime": "2019-08-24T14:15:22Z",
                              "code": "${error.code}",
                              "description": "${error.message}"
                            }<#if error?has_next>,</#if>
                          </#list>
                          <#else>
                        {
                          "dateTime": "2019-08-24T14:15:22Z", 
                          "code":"E400", 
                          "description": "Type mismatch"
                        }
                        </#if>
                      ]
                    }
              '401':
                Unauthorized:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b401
                  x-sandbox-request-query-params:
                    fileFormat: XML
              '403':
                Forbidden:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29a403
                  x-sandbox-request-query-params:
                    fileFormat: XML
                Forbidden (application managed):
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b403
                  x-sandbox-request-query-params:
                    fileFormat: XML
              '404':
                Not Found:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b404
                  x-sandbox-request-query-params:
                    fileFormat: XML
              '409':
                Conflict:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b409
                  x-sandbox-request-query-params:
                    fileFormat: XML
              '429':
                Too many requests:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b429
                  x-sandbox-request-query-params:
                    fileFormat: XML
              '500':
                Generic Error:
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29a500
                  x-sandbox-request-query-params:
                    fileFormat: XML
                Generic Error (application managed):
      x-sandbox-request-headers:
                    pri: a206e009-ef37-4040-924d-db758b29b500
                  x-sandbox-request-query-params:
                    fileFormat: XML
      x-sandbox-request-headers:
                          senderBic: FPADITMM
                          pri: a206e009-ef37-4040-924d-db758b2950b2
                        x-sandbox-request-query-params:
                          fileFormat: XML
                x-sandbox-request-query-params:
                  fileFormat: XML
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/octet-stream:
              schema:
                type: string
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  x-sandbox-request-query-params:
                    fileFormat: XML
                  value: UEsDBBQAAAAIAKly7lo+295EJwAAACUAAAAIAAAAdGVzdC50eHRzzs8rSc0rLclXSMlUSC1OzS3IzFfIzFMozVNIy8xJVajKLNDjAgBQSwECFAMUAAAACACpcu5aPtveRCcAAAAlAAAACAAAAAAAAAAAAAAAgAEAAAAAdGVzdC50eHRQSwUGAAAAAAEAAQA2AAAATQAAAAAA
        '204':
          description: No Content
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            plain/text:
              schema:
                type: string
              examples:
                No Content:
                  value: null
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'fileType' is required.
            errors:
              schema:
                minItems: 1
                type: array
                items:
                  type: object
            dateTime:
              schema:
                $ref: '#/components/schemas/DateTime'
            code:
              schema:
                type: string
                description: |
                  A four character string representing the FPAD error
                  code.
                minLength: 4
                maxLength: 4
            description:
              schema:
                type: string
                description: A string containing the error description.
        '401':
          description: Structure describing FPAD error response for HTTP code 401.
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            text/plain:
              schema:
