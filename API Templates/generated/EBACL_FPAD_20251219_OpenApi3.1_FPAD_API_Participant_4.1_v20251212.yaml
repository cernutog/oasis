openapi: 3.1.0
info:
  title: EBA CLEARING FPAD
  version: '4.1'
  description: FPAD API for interacting with the FPAD functionality for Prevention and Detection assessments.
  contact:
    name: EBA CLEARING
  release: v20251212
  filename_pattern: EBACL_FPAD_<current_date>_OpenApi<oas_version>_<customization>FPAD_API_Participant_<api_version>_<release>.yaml
servers:
  - url: /fpad
    description: Server base path
tags:
  - name: Prevention
    description: Fraud prevention operations
  - name: Detection
    description: Fraud detection operations
  - name: Feedback
    description: Risk assessment feedback operations
  - name: EDS
    description: EDS operations
paths:
  /v1/accounts/assessments:
    post:
      summary: Perform Account Assessment
      description: ' This operation creates a risk assessment for an account, identified by an IBAN. It returns the results
        of the risk assessment in a *RiskInfoArray* that provides the outcomes for all the models performed as part of the
        risk assessment.  The requestor can define the list of models that will be performed in the risk assessment. If the
        models are not defined then a default set of models will be performed, and results returned. As FPAD adapts to changing
        transactional behaviour, the returned risk assessment may change for different invocations of the API for the same
        account.'
      operationId: create-account-assessment
      tags:
        - Prevention
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                accountName:
                  type: string
                  description: Name associated with the Account has to be assessed.
                  examples:
                    - Mario Rossi
                accountBic:
                  $ref: '#/components/schemas/Bic'
                  description: |-
                    BIC of the Agent managing the Account which needs to be
                                        assessed.
                  examples:
                    - FPADITMMXXX
                accountIban:
                  $ref: '#/components/schemas/Iban'
                  description: IBAN identifies the Account which needs to be assessed.
                  examples:
                    - IT02E0300203280782375262458
                requestedModels:
                  type: array
                  items:
                    $ref: '#/components/schemas/ModelItem'
                  description: Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*.
                    If no array is provided, all available models will be applied.
              required:
                - accountBic
                - accountIban
            examples:
              OK:
                value:
                  accountName: Mario Rossi
                  accountBic: FPADITMMXXX
                  accountIban: IT02E0300203280782375262458
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
              Bad Request:
                value:
                  accountName: Mario Rossi
                  accountBic: FPADITMMXXX
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                properties:
                  fuid:
                    type: string
                    description: FPAD Unique Identifier (a UUID specified by RFC4122).
                    examples:
                      - 4ac04478-d70d-4d25-8bde-f2ad0001093d
                    format: uuid
                  accountName:
                    type: string
                    description: FPAD's higher-ranked Creditor Name associated with the Creditor IBAN. It is only returned
                      when the submitted Creditor Name is not too different from the FPAD higher-ranked Creditor Name (for
                      the correct interpretation of which, please refer to the specific EBA CLEARING reference documentation).
                    enum:
                      - PENDING
                      - COMPLETED
                      - ERROR
                  riskInfoArray:
                    $ref: '#/components/schemas/RiskInfoArray'
                    description: RiskInfoArray where each item represents an assessed risk for the Account under evaluation,
                      according to the Participant's request. The item model is identified by the *modelName* and the *modelVersion*
                      properties, while the risk assessment is identified by the *value* property.
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                    accountName: Mario Rossi
                    riskInfoArray:
                      - modelName: Model1
                        modelVersion: 1.0'
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0'
                        modelOutcome: 0.56'
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'status' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/accounts/assessments/vop:
    post:
      summary: Perform Verification Of Payee (VOP) with Account Assessment
      description: |-
        Performs a simultaneous Account Assessment and Verification of Payee request for an account, identified by an IBAN.

        Account Assessment results provide a RiskInfoArray with the outcomes for the models performed as part of the risk assessment. The requestor can define the list of models that will be performed in the risk assessment.  If the models are not defined then a default set of models will be performed, and results returned.

        Account Assessment results will also provide the Reference Name (Creditor Name) known to FPAD when the party name for the account is present in the request and matches above a defined threshold with the Reference Name known to FPAD.

        As FPAD adapts to changing transactional behaviour, the returned risk assessment may change for different invocations of the API for the same account.

        Verification of Payee (VOP) returns the result of the match between the party name or identification details in the request for the account, identified by the IBAN. Where a name match is performed then in the event of a close match the name of the account holder will be returned.

        FPAD, acting as an RVM, will route the Verification of Payee request to the responding PSP (party agent) directly, if the PSP is using FPAD as RVM, or via the EPC VOP Scheme.
      operationId: create-account-assessment-vop
      tags:
        - Prevention
      parameters:
        - $ref: '#/components/parameters/senderBic'
          description: BIC of the participant sending the request used also as the BIC of the Requesting PSP **(D002)**, unless
            a Visibility Restriction BIC is present in the user API configuration.
        - $ref: '#/components/parameters/pri'
          description: Participant Request Identifier used also as Requesting PSP’s reference number of the VOP Request **(T054)**.
        - name: X-Request-Timestamp
          in: header
          description: Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time
            with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
          required: true
          schema:
            type: string
            description: Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time
              with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
            examples:
              - 2024-08-12 15:19:21.123000+00:00
            format: date-time
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                accountAssessment:
                  type: object
                  properties:
                    requestedModels:
                      type: array
                      items:
                        $ref: '#/components/schemas/ModelItem'
                      description: Array with the types of risks to be assessed, each indicated with *Model Name* and *Model
                        Version*. If no array is provided, all available models will be applied.
                vop:
                  type: object
                  properties:
                    party:
                      $ref: '#/components/schemas/PartyType'
                    partyAccount:
                      $ref: '#/components/schemas/AccountType'
                    partyAgent:
                      $ref: '#/components/schemas/AgentType'
                    unstructuredRemittanceInformation:
                      type: array
                      items:
                        $ref: '#/components/schemas/Max140Text'
                      description: |-
                        Additional information about AT-C001 sent by the Requester AT-C007,
                                                Usage Rule: only one entry may be used.
                    requestingAgent:
                      $ref: '#/components/schemas/AgentType'
                  required:
                    - party
                    - partyAccount
                    - partyAgent
                    - requestingAgent
              required:
                - vop
            examples:
              OK:
                value:
                  accountAssessment:
                    requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model2
                        modelVersion: '1.0'
                  vop:
                    party:
                      name: John Doe
                    partyAccount:
                      iban: IT76L0300203280825973665778
                    partyAgent:
                      financialInstitutionId:
                        bicfi: BICEXAMPLE1
                    requestingAgent:
                      financialInstitutionId:
                        bicfi: BICEXAMPLE2
              Bad Request:
                value:
                  accountAssessment:
                    requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model2
                        modelVersion: '1.0'
                  vop:
                    party:
                      name: John Doe
                    partyAccount:
                      iban: IT76L0300203280825973665778
                    partyAgent:
                      financialInstitutionId:
                        bicfi: BICEXAMPLE1
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
            pri:
              $ref: '#/components/headers/pri'
            X-Response-Timestamp:
              schema:
                type: string
                examples:
                  - 2024-08-12 15:19:22.678000+00:00
                format: date-format
              description: Time stamp of provided by the responding PSP **(T061)**.
          content:
            application/json:
              schema:
                type: object
                properties:
                  accountAssessment:
                    type: object
                    properties:
                      fuid:
                        $ref: '#/components/schemas/FpadUniqueIdentifier'
                      fpadPayeeName:
                        type: string
                        description: FPAD's higher-ranked Creditor Name associated with the account IBAN. It is only returned
                          when the submitted Payee Name is not too different from the FPAD higher-ranked Creditor Name (for
                          the correct interpretation of which, please refer to the specific EBA CLEARING reference documentation).
                      riskInfoArray:
                        $ref: '#/components/schemas/RiskInfoArray'
                        description: RiskInfoArray where each item represents an assessed risk for the Account under evaluation,
                          according to the Participant's request. The item model is identified by the *modelName* and the
                          *modelVersion* properties, while the risk assessment is identified by the *value* property.
                    required:
                      - fuid
                      - riskInfoArray
                  vop:
                    $ref: '#/components/schemas/VerificationOfPayeeResponse'
                  messages:
                    type: array
                    items:
                      $ref: '#/components/schemas/Message'
                    description: This is an array of messages containing additional information, warnings and errors concerning
                      the results provided in the response.
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
            X-Response-Timestamp:
              schema:
                type: string
                examples:
                  - 2024-08-12 15:19:22.678000+00:00
                format: date-format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'requestingAgent' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/accounts/assessments/vop/bulk:
    post:
      summary: Request a Bulk Verification Of Payee (VOP) with Account Assessment
      description: 'Submits a bulk request for simultaneous Account Assessment and Verification of Payee (VOP) for multiple
        accounts, identified by their IBANs. This is an asynchronous operation that returns only the *bulkId* and the request
        status. The execution progress can be monitored calling the corresponding GET endpoint, which also peovides bulk results
        if the status ia COMPLETED.       '
      operationId: create-account-assessment-vop-bulk
      tags:
        - Prevention
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
        - name: X-Request-Timestamp
          in: header
          description: Timestamp of the Bulk Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time
            with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
          required: true
          schema:
            type: string
            description: Timestamp of the Bulk Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local
              time with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
            examples:
              - 2024-08-12 15:19:21.123000+00:00
            format: date-time
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                requestedModels:
                  type: array
                  items:
                    $ref: '#/components/schemas/ModelItem'
                  description: Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*.
                    If no array is provided, all available models will be applied.
                reqs:
                  type: array
                  items:
                    $ref: '#/components/schemas/VopBulkRequest'
              required:
                - reqs
            examples:
              OK:
                value: |2

                  requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model2
                        modelVersion: '1.0'
                    reqs:
                      - xid: 123e4567-e89b-12d3-a456-426614174000
                        rBic: REQAGBICXXX
                        pBic: PTYAGBICXXX
                        iban: IT60X0542811101000000123456
                        name: Cristopher Sylvester
              Bad Request:
                value:
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model2
                      modelVersion: '1.0'
                  reqs:
                    - xid: 123e4567-e89b-12d3-a456-426614174000
                      iban: IT60X0542811101000000123456
                      name: Cristopher Sylvester
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
            pri:
              $ref: '#/components/headers/pri'
          content:
            application/json:
              schema:
                type: object
                properties:
                  bulkId:
                    type: string
                    description: The unique identifier of the bulk request.
                    format: uuid
                  status:
                    type: string
                    description: Specifies the progress status of the bulk request.
                    enum:
                      - PENDING
                      - ERROR
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'bulkId' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/accounts/assessments/vop/bulk/{bulkId}:
    get:
      summary: Retrieve a Bulk Verification Of Payee (VOP) with Account Assessment
      description: This operation checks the status of and can retrieve the content of a previously requested Bulk Verification
        Of Payee (VOP) with Account Assessment. It returns a status attribute which provides information about the elaboration
        process and, if its status is COMPLETED, it also returns bulk results. A HATEOAS block of links, included in the response,
        provides the URLs needed to get the first/last/previous/next page of records, when results exceed the number that
        can be returned in a single page.
      operationId: get-account-assessment-vop-bulk
      tags:
        - Prevention
      parameters:
        - name: bulkId
          in: path
          description: Unique identifier of the bulk request.
          required: true
          schema:
            type: string
            description: Unique identifier of the bulk request.
            format: uuid
        - name: senderBic
          in: header
          description: BIC of the participant sending the request used also as the BIC of the Requesting PSP **(D002)**, unless
            a Visibility Restriction BIC is present in the user API configuration.
          required: true
          schema:
            type: string
            description: BIC of the participant sending the request used also as the BIC of the Requesting PSP **(D002)**,
              unless a Visibility Restriction BIC is present in the user API configuration.
            examples:
              - FPADITMM
        - name: pri
          in: header
          description: ''
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: |-
            Report page number requested.
            If this page does not exist, an error will be returned.
            If this parameter is not provided, the first page will be returned.
          required: false
          schema:
            type: integer
            description: |-
              Report page number requested.
              If this page does not exist, an error will be returned.
              If this parameter is not provided, the first page will be returned.
        - name: itemsPerPage
          in: query
          description: |-
            Number of items per page requested.
                        If this number exeeds the maximum allowed by the system configuration, an error will be returned.
                        If this parameter is not provided, the maximum allowed number of items per pages will be applied.
          required: false
          schema:
            type: integer
            description: |-
              Number of items per page requested.
                          If this number exeeds the maximum allowed by the system configuration, an error will be returned.
                          If this parameter is not provided, the maximum allowed number of items per pages will be applied.
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                properties:
                  bulkId:
                    type: string
                    description: Unique identifier of the bulk request.
                    format: uuid
                  status:
                    type: string
                    description: Specifies the progress status of the bulk request.
                    enum:
                      - PENDING
                      - COMPLETED
                      - ERROR
                  counters:
                    type: array
                    items:
                      $ref: '#/components/schemas/VopBulkResponseCounter'
                    description: 'Set of counters for VOP responses by match result. All counters are related to the whole
                      bulk set, not to the single page retrieved. '
                  outcome:
                    type: array
                    items:
                      oneOf:
                        - $ref: '#/components/schemas/VopBulkResponse'
                        - $ref: '#/components/schemas/ShortErrorResponse'
                  pagination:
                    $ref: '#/components/schemas/PaginationInfo'
                    description: This field contains the number, the page and link of pagination response
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '404':
          $ref: '#/components/responses/ErrorResponse_404'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /vop/v1/payee-verifications:
    post:
      summary: Perform Verification Of Payee (VOP)
      description: |-
        Performs a Verification of Payee (VOP) only request and
        returns the result of the match between the party name or identification details in the request for the account, identified by the IBAN. Where a name match is performed then in the event of a close match the name of the account holder will be returned.

        FPAD, acting as an RVM, will route the Verification of Payee request to the responding PSP (party agent) directly, if the PSP is using FPAD as RVM, or via the EPC VOP Scheme.
      operationId: postVerificationOfPayeeRequests
      tags:
        - Prevention
      parameters:
        - name: X-Request-ID
          in: header
          description: The Requesting PSP's reference number of the VOP Request
          required: true
          schema:
            type: string
            description: The Requesting PSP's reference number of the VOP Request
            format: uuid
        - name: X-Request-Timestamp
          in: header
          description: Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time
            with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
          required: true
          schema:
            type: string
            description: Timestamp of the VOP Request in ISO 8601 format, either UTC (YYYY-MM-DDThh:mm:ss.sssZ) or local time
              with UTC offset (YYYY-MM-DDThh:mm:ss.sss+/-hh:mm), milliseconds included.
            examples:
              - 2024-08-12 15:19:21.123000+00:00
            format: date-time
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerificationOfPayeeRequest'
            examples:
              OK:
                value:
                  transactionData:
                    serviceType: SCTInst
                    transactionId: 41e400e45
                    debtorName: Mario Rossi
                    debtorBic: FPADITMMXXX
                    debtorIban: IT02E0300203280782375262458
                    creditorName: Eric Mulder
                    creditorBic: FPFPDEMM441
                    creditorIban: DE89370400440532013000
                    amount: 1000
                    currency: EUR
                    referenceDateTime: '2023-03-23T14:15:22Z'
                    categoryPurpose: ABCD
                    purposeCode: ABCD
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model5
                      modelVersion: '1.1'
              Bad Request:
                value:
                  requestedModels:
                    - modelName: Model1
                      modelVersion: '1.0'
                    - modelName: Model5
                      modelVersion: '1.1'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '200':
          description: A verification code and the actual name if the code is CMTC
          headers:
            X-Request-ID:
              schema:
                type: string
                examples:
                  - a206e009-ef37-4040-924d-db758b29b200
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                examples:
                  - 2024-08-12 15:19:22.678000+00:00
                format: date-time
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerificationOfPayeeResponse'
        '400':
          description: Malformed payload
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                examples:
                  - 2024-08-12 15:19:22.678000+00:00
                format: date-time
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerificationOfPayeeError'
              examples:
                Bad Request:
                  x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b400
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    type: ERROR
                    code: FORMAT ERROR
                    title: Bad Request
                    status: 400
                    detail: The payload is malformed.
                    instance: https://fpad.ebaclearing.eu/vop/v1/payee-verifications
        '401':
          description: Client invalid. The Requesting PSP is not correctly authorized to perform the request.
          headers:
            Unauthorized:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                examples:
                  - 2024-08-12 15:19:22.678000+00:00
                format: date-time
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerificationOfPayeeError'
              examples:
                Unauthorized:
                  x-sandbox-request-headers:
                    X-Request-ID: a206e009-ef37-4040-924d-db758b29b401
                    X-Request-Timestamp: 2024-08-12 15:19:22.678000+00:00
                  value:
                    type: ERROR
                    code: CLIENT_INVALID
                    title: Unauthorized
                    status: 400
                    detail: The client is not authenticated or authorized.
                    instance: https://fpad.ebaclearing.eu/vop/v1/payee-verifications
        '500':
          description: Internal Server Error. This code is used whenever a technical problem occurred in the application code
            or application server that prevented the execution of the request.
          headers:
            Generic Error:
              schema:
                type: string
                format: uuid
            X-Response-Timestamp:
              schema:
                type: string
                examples:
                  - 2024-08-12 15:19:22.678000+00:00
                format: date-time
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerificationOfPayeeError'
  /v1/transactions/assessments:
    post:
      summary: Create Transaction Assessment
      description: |-
        This operation creates a pre-validation risk assessment for a
        transaction before it is sent for clearing and settlement.

        It returns the results of the risk assessment in a *RiskInfoArray* that provides the outcomes for all the models performed as part of the risk assessment. The requestor can define the list of models that will be performed in the risk assessment. If the models are not defined then a default set of models will be performed, and results returned.

         As FPAD adapts to changing transactional behaviour, the returned risk assessment may change for different invocations of the API for the same account.
      operationId: create-transaction-assessment
      tags:
        - Prevention
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                transactionData:
                  $ref: '#/components/schemas/AssessmentTransactionData'
                  description: Data of the Potential transaction to be assessed.
                requestModels:
                  type: array
                  items:
                    $ref: '#/components/schemas/ModelItem'
                  description: Array with the types of risks to be assessed, each indicated with *Model Name* and *Model Version*.
                    If no array is provided, all available models will be applied.
              required:
                - transactionData
            examples:
              OK:
                value:
                  value:
                    transactionData:
                      serviceType: SCTInst
                      transactionId: 41e400e45
                      debtorName: Mario Rossi
                      debtorBic: FPADITMMXXX
                      debtorIban: IT02E0300203280782375262458
                      creditorName: Eric Mulder
                      creditorBic: FPFPDEMM441
                      creditorIban: DE89370400440532013000
                      amount: 1000
                      currency: EUR
                      referenceDateTime: '2023-03-23T14:15:22Z'
                      categoryPurpose: ABCD
                      purposeCode: ABCD
                    requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model5
                        modelVersion: '1.1'
              Bad Request:
                value:
                  value:
                    requestedModels:
                      - modelName: Model1
                        modelVersion: '1.0'
                      - modelName: Model5
                        modelVersion: '1.1'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                properties:
                  fuid:
                    $ref: '#/components/schemas/FpadUniqueIdentifier'
                  riskInfoArray:
                    $ref: '#/components/schemas/RiskInfoArray'
                    description: RiskInfoArray where each item represents an assessed risk for **transaction**, according
                      to the Participant's request. The item model is identified by the *modelName* and the *modelVersion*
                      properties, while the risk assessment is identified by the *value* property.
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                    riskInfoArray:
                      - modelName: model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.99
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'transactionData' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/transactions/investigations:
    get:
      summary: Retrieve Transaction Investigation by Transaction Key
      description: |-
        This operation retrieves a risk assessment for a single pacs.008 SCT or SCT Inst transaction that has been completed in STEP2-T or RT1. It returns a *RiskInfoArray* that provides the outcomes for the models performed at the time that the transaction was received by FPAD.

        The returned result is a static, historical risk assessment that will remain the same across multiple calls for the same transaction. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment. The models cannot be selected as part of the call.

        The *RiskInfoArray* is retrieved through the transaction key elements:
        service Type, debtor agent BIC, transaction ID, reference date.

        If no transaction matching input data is found, an empty body is returned.
      operationId: get-transaction-investigation-by-transaction-key
      tags:
        - Detection
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
        - name: serviceType
          in: query
          description: EBA CLEARING Service Type (SCT, SCTInst).
          required: true
          schema:
            $ref: '#/components/schemas/ServiceType'
            description: EBA CLEARING Service Type (SCT, SCTInst).
        - name: debtorBic
          in: query
          description: BIC of the Debtor's Agent.
          required: true
          schema:
            $ref: '#/components/schemas/Bic'
            description: BIC of the Debtor's Agent.
        - name: transacionId
          in: query
          description: Identifier of the transaction, unique for the Debtor''s Agent.
          required: true
          schema:
            type: string
            description: Identifier of the transaction, unique for the Debtor''s Agent.
            maxLength: 35
        - name: referenceDateTime
          in: query
          description: It must match with settlementDate for SCT and acceptanceDateTime for SCTInst services.
          required: true
          schema:
            type: string
            description: It must match with settlementDate for SCT and acceptanceDateTime for SCTInst services.
            format: date-time
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                properties:
                  fuid:
                    $ref: '#/components/schemas/FpadUniqueIdentifier'
                    description: FPAD Unique Identifier of the transaction investigation found.
                  transactonData:
                    $ref: '#/components/schemas/InvestigationTransactionData'
                    description: Basic elements of the transaction.
                  riskInfoArray:
                    $ref: '#/components/schemas/RiskInfoArray'
                    description: RiskInfoArray for the transaction.
              examples:
                OK:
                  x-sandbox-request-path-params:
                    fuid: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                    transactionData:
                      instructingAgentBic: FPADITMM
                      instructedAgentBic: FPADITMM
                      serviceType: SCTInst
                      transactionId: 41e400e45
                      debtorName: Mario Rossi
                      debtorBic: FPADITMMXXX
                      debtorIban: IT02E0300203280782375262458
                      creditorName: Eric Mulder
                      creditorBic: FPFPDEMM441
                      creditorIban: DE89370400440532013000
                      amount: 1000
                      currency: EUR
                      referenceDateTime: 2023-03-23 14:15:22+00:00
                      categoryPurpose: ABCD
                      purposeCode: ABCD
                    riskInfoArray:
                      - modelName: model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.99
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'senderBic' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/transactions/investigations/{fuid}:
    get:
      summary: Retrieve Transaction Investigation By FUID
      description: |-
        This operation retrieves a risk assessment for a single pacs.008 SCT or SCT Inst transaction that has been completed in STEP2-T or RT1. It returns a *RiskInfoArray* that provides the outcomes for the models performed at the time that the transaction was received by FPAD.

         The returned result is a static, historical risk assessment that will remain the same across multiple calls for the same transaction. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment. The models cannot be selected as part of the call.

        The *RiskInfoArray* is retrieved through the FUID assigned to the
        *RiskInfoArray* during transaction data collection.

        If *fuid* is not found, a 404 error is returned.
      operationId: get-transaction-investigation-by-fuid
      tags:
        - Detection
      parameters:
        - $ref: '#/components/parameters/fuid'
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                properties:
                  fuid:
                    $ref: '#/components/schemas/FpadUniqueIdentifier'
                    description: FPAD Unique Identifier of the transaction investigation found.
                  transactonData:
                    $ref: '#/components/schemas/InvestigationTransactionData'
                    description: Basic elements of the transaction.
                  riskInfoArray:
                    $ref: '#/components/schemas/RiskInfoArray'
                    description: RiskInfoArray for the transaction.
              examples:
                OK:
                  x-sandbox-request-path-params:
                    fuid: 4ac04478-d70d-4d25-8bde-f2ad0001093d
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                    transactionData:
                      instructingAgentBic: FPADITMM
                      instructedAgentBic: FPADITMM
                      serviceType: SCTInst
                      transactionId: 41e400e45
                      debtorName: Mario Rossi
                      debtorBic: FPADITMMXXX
                      debtorIban: IT02E0300203280782375262458
                      creditorName: Eric Mulder
                      creditorBic: FPFPDEMM441
                      creditorIban: DE89370400440532013000
                      amount: 1000
                      currency: EUR
                      referenceDateTime: 2023-03-23 14:15:22+00:00
                      categoryPurpose: ABCD
                      purposeCode: ABCD
                    riskInfoArray:
                      - modelName: model1
                        modelVersion: 1.0
                        modelOutcome: HIGH
                      - modelName: Model2
                        modelVersion: 1.0
                        modelOutcome: 0.99
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'senderBic' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '404':
          $ref: '#/components/responses/ErrorResponse_404'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/transactions/investigations/reports:
    post:
      summary: Request Transaction Investigation Report
      description: |-
        This operation requests creation of a report that provides the risk
        assessments for multiple pacs.008 SCT or SCT Inst transactions that have been completed in STEP2-T or RT1. It returns a reportId that is then used by the Retrieve Transaction Investigation Report operation to retrieve the request status and and its outcome.

        The request allows several *transactionFilter* parameters to be defined that allow a set of transactions to be selected in the report.
      operationId: create-transaction-investigation-report
      tags:
        - Detection
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reportName:
                  type: string
                  description: A name for the requested report assigned by the caller.
                transactionFilter:
                  $ref: '#/components/schemas/TransactionInvestigationReportFilter'
                  description: |-
                    Data of the Potential transaction to be assessed. The
                    following rules apply:

                    - In general, each type of information is applied in AND
                    with respect to the others.

                    - A BIC can contain only 8 or 11 characters.

                    - The TransactionID and an IBAN are compared for exact
                    equality only.

                    - The Name is treated as a prefix for a wildcard match.
                    There are also limits to the possible combinations and uses
                    of the function (e.g., the maximum number of occurrences
                    envisaged for a Report, the maximum size of a Report, etc.).

                    For the complete list of these limitations, refer to thespecific FPAD documentation for the API.
              required:
                - transactionFilter
            examples:
              OK:
                value:
                  transactionFilter:
                    instructingAgentBic: FPADITMM
                    serviceType: SCT
                    debtorIban: IT78K0300203280111271851199
                    minAmount: 1000
                    currency: EUR
                    minReferenceDateTime: '2023-05-01T00:00:00Z'
                    maxReferenceDateTime: '2023-05-02T23:59:59Z'
              Bad Request:
                value:
                  reportName: Test
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '202':
          description: Accepted
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: string
                description: Unique identifier for the requested report.
                format: uuid
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    reportId: 9afffb1a-f8bb-4345-bda4-f6e97d50cba8
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'senderBic' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/transactions/investigations/reports/{reportId}:
    get:
      summary: Retrieve Transaction Investigation Report
      description: |-
        This operation checks the status of and can retrieve the content of a previously requested Transaction Investigation Report. It returns a status attribute which provides information about the elaboration process and, if its status is COMPLETED, it also returns the report outcome. A HATEOAS block of links, included in the response, provides the URLs needed to get the first/last/previous/next page of records, when transactions exceed the number that can be returned in a single page.

        Report pages provide references to the transactions and the associated *RiskInfoArray* providing the result of the risk assessment performed at the time the that the transaction was received by FPAD. The returned *RiskInfoArray* will contain all models performed at the time of the original risk assessment.
      operationId: get-transaction-investigation-report
      tags:
        - Detection
      parameters:
        - name: reportId
          in: path
          description: Unique identifier for a requested report.
          required: true
          schema:
            type: string
            description: Unique identifier for a requested report.
            format: uuid
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
        - name: page
          in: query
          description: |-
            Report page number requested.

            If this page does not exist, an error will be returned.

            If this parameter is not provided, the first page will be returned.
          required: false
          schema:
            type: integer
            description: |-
              Report page number requested.

              If this page does not exist, an error will be returned.

              If this parameter is not provided, the first page will be returned.
        - name: itemsPerPage
          in: query
          description: |-
            Number of items per page requested.

            If this number exeeds the maximum allowed by the system configuration, an error will be returned.

            If this parameter is not provided, the maximum allowed number of items per pages will be applied.
          required: false
          schema:
            type: integer
            description: |-
              Number of items per page requested.

              If this number exeeds the maximum allowed by the system configuration, an error will be returned.

              If this parameter is not provided, the maximum allowed number of items per pages will be applied.
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                properties:
                  reportId:
                    type: string
                    description: Unique identifier for the requested report.
                    format: uuid
                  reportRequestDateTime:
                    type: string
                    description: Date and time of the report request.
                    format: date-time
                  reportProcessingDateTime:
                    type: string
                    description: |-
                      Date and time at which the report request has been
                      processed.
                    format: date-time
                  status:
                    type: string
                    enum:
                      - REQUEST
                      - COMPLETED
                      - ERROR
                  outcome:
                    description: This object contains the report outcome. It is present obly if the report status is COMPLETED.
                    type: array
                    items:
                      type: object
                      properties:
                        fuid:
                          $ref: '#/components/schemas/FpadUniqueIdentifier'
                          description: |-
                            FPAD Unique Identifier of the evaluated
                            RiskInfoArray for the transaction.
                        transactionKey:
                          $ref: '#/components/schemas/TransactionKey'
                        debtorBic:
                          $ref: '#/components/schemas/Iban'
                          description: IBAN of the debtor's account.
                        creditorBic:
                          $ref: '#/components/schemas/Bic'
                          description: BIC of the Agent managing the Creditor's Account.
                        creditorIban:
                          $ref: '#/components/schemas/Iban'
                          description: IBAN of the creditor's account.
                        amount:
                          $ref: '#/components/schemas/Amount'
                          description: Amount of the transaction.
                        currency:
                          $ref: '#/components/schemas/Currency'
                          description: Currency of the transaction amount.
                        riskInfoArray:
                          $ref: '#/components/schemas/RiskInfoArray'
                          description: RiskInfoArray for the transaction.
                      required:
                        - fuid
                        - transactionKey
                        - riskInfoArray
                  messages:
                    type: array
                    items:
                      $ref: '#/components/schemas/Message'
                    description: |-
                      This is an array of messages containing warnings and
                      errors encountered during the report generation process.
                  pagination:
                    $ref: '#/components/schemas/PaginationInfo'
              examples:
                OK:
                  x-sandbox-request-path-params:
                    reportId: 7f44452c-5c1d-42f0-8fb8-2df07a5f0f6c
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value:
                    reportId: 836df459-dc40-4aa1-972a-6eb0a864dff9
                    reportRequestDateTime: 2019-08-24 14:15:22+00:00
                    reportProcessingDateTime: 2019-08-24 14:15:22+00:00
                    status: COMPLETED
                    outcome:
                      - fuid: beec059e-58bd-40b5-871b-65b3855eb2b0
                        transactionKey:
                          serviceType: SCT
                          debtorBic: FPADITMMXXX
                          transactionId: 41e400e45
                          referenceDateTime: 2019-08-24 14:15:22+00:00
                        debtorIban: IT02E0300203280782375262458
                        creditorIban: DE89370400440532013000
                        amount: 1000
                        currency: EUR
                        riskInfoArray:
                          - modelName: Model1
                            modelVersion: 1.0
                            modelOutcome: HIGH
                          - modelName: Model2
                            modelVersion: 1.0
                            modelOutcome: 0.56
                    pagination:
                      currentPage: 1
                      totalsPage: 1
                      itemsPerPage: 100
                      links:
                        - rel: self
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=1
                        - rel: next
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=2
                        - rel: first
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=1
                        - rel: last
                          href: /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=15
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Field 'senderBic' is required.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '404':
          $ref: '#/components/responses/ErrorResponse_404'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/risk-info/feedbacks:
    post:
      summary: Provide Feedback
      description: |-
        This operation allows feedback to be provided against the results of an FPAD risk assessment identified by an FPAD Unique ID (FUID). The same API is used to provide feedback on Account Assessment, Transaction Assessment and Transaction Investigation risk assessments. The feedback should reflect the outcome of the risk assessment as determined by the PSP.

        The API can be called multiple times for any FUID allowing the PSP to change the feedback provided to FPAD.
      operationId: create-feedback-by-fuid
      tags:
        - Feedback
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: Structure of a FPAD assessment feedback request.
              properties:
                feedbackType:
                  type: string
                  description: |-
                    Feedback type:
                    - TRXASS: Prevention - Transaction assessment

                    - ACCASS: Prevention - Account assessment

                    - TRXINV: Detection - Transaction investigation (settled transactions evaluated during the data collecting phase)
                  enum:
                    - TRXASS
                    - ACCASS
                    - TRXINV
                fuid:
                  $ref: '#/components/schemas/FpadUniqueIdentifier'
                  description: FPAD Unique Identifier of the risk info evaluation for which the feedback is provided.
                feedbackValue:
                  type: string
                  description: |-
                    Feedback value provided for the risk info evaluation
                    identified by its FUID. The Feedback Value fields decode to the following:

                    - HIGHRISK – The risk assessment referenced by the FUID is considered high risk.

                    - LOWRISK – The risk assessment referenced by the FUID is considered low risk.

                    - NOFEEDBACK – It was not possible to determine a risk
                    outcome for the risk assessment referenced by the FUID.

                     - IGNORE – The risk outcome, and any previously submitted risk outcomes, for the risk assessment referenced by the FUID should be ignored.
                  enum:
                    - HIGHRISK
                    - LOWRISK
                    - NOFEEDBACK
                    - IGNORE
              required:
                - feedbackType
                - fuid
                - feedbackValue
            examples:
              OK:
                value:
                  feedbackType: TRXASS
                  fuid: 4ac04478-d70d-4d25-8bde-f2ad0009999d
                  feedbackValue: LOWRISK
              Bad Request:
                value:
                  feedbackType: NOTYPE
                  fuid: 4ac04478-d70d-4d25-8bde-f2ad0009999d
                  feedbackValue: LOWRISK
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '201':
          description: Created
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                type: object
                description: Response of a Request Transaction Investigation Report.
              examples:
                OK:
                  x-sandbox-request-headers:
                    senderBic: FPADITMM
                    pri: a206e009-ef37-4040-924d-db758b2950b2
                  value: null
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Value 'NOTYPE' is not defined in the schema.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
  /v1/eds/local-file:
    get:
      summary: Retrieve the EDS local file in the format specified
      description: |-
        This operation returns a ZIP file containing the EDS local file, in the specified format and for the requested date, and its checksum.
        If not specified, the current date is used by default.
        The date must not be more than 8 days prior to the current date.

        If no file is found for the requested date and format, a **204 No Content** response will be returned.
      operationId: get-eds-local-file
      tags:
        - EDS
      parameters:
        - $ref: '#/components/parameters/senderBic'
        - $ref: '#/components/parameters/pri'
        - name: fileFormat
          in: query
          description: The requested format of the EDS local file.
          required: true
          schema:
            type: string
            description: The requested format of the EDS local file.
            enum:
              - XML
              - CSV
              - JSON
        - name: fileDate
          in: query
          description: |-
            The date for which the EDS Local File is required.
            If not specified, the current date is used by default.
            The specified date must not be earlier than 8 days before the current date.
          required: false
          schema:
            type: string
            description: |-
              The date for which the EDS Local File is required.
              If not specified, the current date is used by default.
              The specified date must not be earlier than 8 days before the current date.
            format: date
      x-sandbox-rule-type: SCRIPT_JS
      x-sandbox-rule-content: |
        var responseName = "OK";
        var pri = camelHeaders['pri'];
        if (pri === "a206e009-ef37-4040-924d-db758b29b400") {
            responseName = "Bad Request" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b401") {
            responseName = "Unauthorized" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a403") {
            responseName = "Forbidden" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b403") {
            responseName = "Forbidden (application managed)" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b404") {
            responseName = "Not Found" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b409") {
            responseName = "Conflict" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b429") {
            responseName = "Too many requests" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29a500") {
            responseName = "Generic Error" ;
        }
        else if (pri === "a206e009-ef37-4040-924d-db758b29b500") {
            responseName = "Generic Error (application managed)" ;
        }
        else if (!!validationErrors && validationErrors.length > 0) {
            responseName = "Bad Request" ;
        }
        responseName;
      x-sandbox-response-extension:
        '400':
          Bad Request:
            x-sandbox-request-headers:
              senderBic: FPADITMM
              pri: a206e009-ef37-4040-924d-db758b29b400
            x-sandbox-response-body: |
              {
                "errors": [
                  <#if validationErrors??>
                    <#list validationErrors as error>
                      {
                        "dateTime": "2019-08-24T14:15:22Z",
                        "code": "${error.code}",
                        "description": "${error.message}"
                      }<#if error?has_next>,</#if>
                    </#list>
                    <#else>
                  {
                    "dateTime": "2019-08-24T14:15:22Z", 
                    "code":"E400", 
                    "description": "Type mismatch"
                  }
                  </#if>
                ]
              }
      responses:
        '200':
          description: OK
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '204':
          description: No Content
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            plain/text:
              schema:
                type: string
                format: binary
        '400':
          description: Bad Request
          headers:
            fri:
              $ref: '#/components/headers/FpadResponseIdentifier'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Bad Request:
                  value:
                    errors:
                      - dateTime: 2019-08-24 14:15:22+00:00
                        code: E400
                        description: Value 'NOTYPE' is not defined in the schema.
        '401':
          $ref: '#/components/responses/ErrorResponse_401'
        '403':
          $ref: '#/components/responses/ErrorResponse_403'
        '409':
          $ref: '#/components/responses/ErrorResponse_409'
        '429':
          $ref: '#/components/responses/ErrorResponse_429'
        '500':
          $ref: '#/components/responses/ErrorResponse_500'
components:
  parameters:
    senderBic:
      name: senderBic
      in: header
      description: BIC of the participant sending the request.
      required: true
      schema:
        $ref: '#/components/schemas/Bic8'
        description: BIC of the participant sending the request.
        examples:
          - FPADITMM
    pri:
      name: pri
      in: header
      description: Participant Request Identifier - The sender Participant must set this value with an identifier of the request
        that must be unique for the Participant itself.
      required: true
      schema:
        type: string
        description: Participant Request Identifier - The sender Participant must set this value with an identifier of the
          request that must be unique for the Participant itself.
        examples:
          - a206e009-ef37-4040-924d-db758b2950b2
        format: uuid
    fuid:
      name: fuid
      in: path
      description: FPAD Unique Identifier of the risk info evaluation to seek.
      required: true
      schema:
        type: string
        description: FPAD Unique Identifier of the risk info evaluation to seek.
        examples:
          - 9d356e83-63a7-4763-92fc-52aa7bf4a21f
        format: uuid
  headers:
    FpadResponseIdentifier:
      schema:
        type: string
        description: FPAD (API) Response Identifier - A Universal Unique Identifier (UUID) associated by FPAD to the API response.
        examples:
          - 0d1d7e3a-e2c2-48da-83ff-9920eaad8c93
        format: uuid
      description: FPAD (API) Response Identifier - A Universal Unique Identifier (UUID) associated by FPAD to the API response.
    pri:
      schema:
        type: string
        description: Participant Request Identifier - The sender Participant must set this value with an identifier of the
          request that must be unique for the Participant itself.
        examples:
          - a206e009-ef37-4040-924d-db758b2950b2
        format: uuid
      description: Participant Request Identifier - The sender Participant must set this value with an identifier of the request
        that must be unique for the Participant itself.
  schemas:
    AccountType:
      type: object
      title: AccountType
      properties:
        iban:
          $ref: '#/components/schemas/IBANType'
      required:
        - iban
    AgentType:
      type: object
      title: AgentType
      properties:
        financialInstitutionId:
          type: object
          properties:
            bicfi:
              $ref: '#/components/schemas/BICType'
          required:
            - bicfi
      required:
        - financialInstitutionId
    Amount:
      type: number
      description: Standard amount.
      examples:
        - 1048.27
      format: double
      maximum: 999999999999.99
      title: Amount
    AssessmentTransactionData:
      type: object
      description: |
        Structure of a transaction assessment request, with all data of a
        potential transaction that will be evaluated.
      title: AssessmentTransactionData
      properties:
        serviceType:
          $ref: '#/components/schemas/ServiceType'
        transactionId:
          type: string
          description: |
            Unique identifier of the potential transaction which can be set by the sender Participant (It could correspond to the actual Transaction ID,  used in the EBA CLEARING STEP2/RT1 Services if already assigned by the Participant itself at the time of the assessment request).
          maxLength: 35
        debtorName:
          type: string
          description: |
            Name associated with the Debtor's Account present in the potential transaction that has to be assessed.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Debtor's Account present in the
            potential transaction that has to be assessed.
        debtorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN of the debtor
        creditorName:
          type: string
          description: |
            Name associated with the Creditor's Account present in the potential transaction that has to be assessed.
        creditorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Creditor's Account present in the
            potential transaction that has to be assessed.
        creditorIban:
          $ref: '#/components/schemas/Iban'
          description: |
            IBAN identifies the Creditor's Account present in the potential
            transaction that has to be assessed.
        amount:
          $ref: '#/components/schemas/Amount'
          description: Amount of the potential transaction that has to be assessed.
        currency:
          $ref: '#/components/schemas/Currency'
          description: |
            Currency of the Amount of the potential transaction that has to be assessed.
        referenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Reference date and time of the potential transaction that has to be assessed.
            It must me intended as *settlementDate* for SCT and *acceptanceDateTime* for SCTInst services.
        categoryPurpose:
          type: string
          description: |
            Category Purpose of the potential transaction that has to be
            assessed.
          minLength: 4
          maxLength: 4
        purposeCode:
          type: string
          description: Purpose Code of the potential transaction that has to be assessed.
          minLength: 1
          maxLength: 4
      required:
        - serviceType
        - debtorName
        - debtorBic
        - debtorIban
        - creditorName
        - creditorBic
        - creditorIban
        - amount
        - currency
    Bic:
      type: string
      description: Business Identifier Code (BIC) in 8 or 11 characters format.
      examples:
        - FPADITMMXXX
      pattern: '[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1}'
      title: Bic
    Bic8:
      type: string
      description: Business Identifier Code (BIC) in 8 characters format.
      examples:
        - FPADITMM
      pattern: '[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}'
      minLength: 8
      maxLength: 8
      title: Bic8
    BICType:
      type: string
      examples:
        - ABCDBEBBFIM
      pattern: ^[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1}$
      title: BICType
    Currency:
      type: string
      description: ISO 4217 currency code.
      examples:
        - EUR
      pattern: '[A-Z]{3}'
      title: Currency
    DateTime:
      type: string
      description: Timestamp in ISO 8601 format.
      examples:
        - 2019-08-24 14:15:22+00:00
      format: date-time
      title: DateTime
    ErrorResponse:
      type: object
      description: |
        Structure describing FPAD error response, with a mandatory array of
        errors, each one with code, description and the timestamp of when it occurred.
      title: ErrorResponse
      properties:
        errors:
          minItems: 1
          type: array
          items:
            type: object
            properties:
              dateTime:
                $ref: '#/components/schemas/DateTime'
              code:
                type: string
                description: A four character string representing the FPAD error code.
                minLength: 4
                maxLength: 4
              description:
                type: string
                description: A string containing the error description.
            required:
              - dateTime
              - code
              - description
    FpadUniqueIdentifier:
      type: string
      description: FPAD Unique Identifier (a UUID specified by RFC4122).
      examples:
        - 4ac04478-d70d-4d25-8bde-f2ad0001093d
      format: uuid
      title: FpadUniqueIdentifier
    GenericOrganisationIdentification:
      type: object
      description: |
        Usage Rule: the use of either ‘schemeNameCode’ or ‘schemeNameProprietary’ is mandatory when the ‘identification code’ is used.
        Mutual exclusion is verified by business rules executed after the json parsing.
      title: GenericOrganisationIdentification
      properties:
        identification:
          $ref: '#/components/schemas/Max256Text'
          description: Unique and unambiguous identification of an organisation.
        schemeNameCode:
          $ref: '#/components/schemas/OrganisationIdentificationCode'
          description: An entry provided by an external ISO code list.
        schemeNameProprietary:
          $ref: '#/components/schemas/Max35Text'
          description: A scheme name defined in a proprietary way.
        issuer:
          $ref: '#/components/schemas/Max35Text'
          description: Issuer of the identification.
      required:
        - identification
    HateoasBlock:
      type: object
      description: Generic structure of a HATEOAS block.
      examples:
        - rel: next
          href: |
            /transactions/investigations/reports/fc91e31c-820f-4a9e-94ba-371cb2dcaa1d?page=2
      title: HateoasBlock
      properties:
        rel:
          type: string
          description: |
            It defines the *relation* (i.e. the description) of the resource retrieved by the *href* attribute.
        href:
          type: string
          description: URI of the related resource.
      required:
        - rel
        - href
    Iban:
      type: string
      description: International Bank Account Number (IBAN).
      examples:
        - IT78K0300203280111271851199
      pattern: '[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}'
      title: Iban
    IBANType:
      type: string
      pattern: ^[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}$
      title: IBANType
    InvestigationTransactionData:
      type: object
      description: Basic structure with all key elements of a transaction.
      examples:
        - instructingAgentBic: FPADITMM
          instructedAgentBic: FPADITMM
          transactionId: string
          debtorName: string
          debtorBic: FPADITMMXXX
          debtorIban: IT78K0300203280111271851199
          creditorName: string
          creditorBic: FPADITMMXXX
          creditorIban: IT78K0300203280111271851199
          amount: 340.75
          currency: EUR
          referenceDateTime: '2019-08-24T14:15:22Z'
          categoryPurpose: ABCD
          purposeCode: ABCD
      title: InvestigationTransactionData
      properties:
        instructingAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: |
            BIC of the instructing Agent for the transaction.
        instructedAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: |
            BIC of the instructed Agent for the transaction.
        serviceType:
          $ref: '#/components/schemas/ServiceType'
        transactionId:
          type: string
          description: Unique identifier of the transaction for the participant.
          maxLength: 35
        debtorName:
          type: string
          description: |
            Name associated with the Debtor's Account present in the
            transaction.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Debtor's Account present in the
            transaction.
        debtorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN of the debtor.
        creditorName:
          type: string
          description: |
            Name associated with the Creditor's Account present in the
            transaction.
        creditorBic:
          $ref: '#/components/schemas/Bic'
          description: |
            BIC of the Agent managing the Creditor's Account present in the
            transaction.
        creditorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN identifies the Creditor's Account present in the transaction.
        amount:
          $ref: '#/components/schemas/Amount'
          description: Amount of the transaction.
        currency:
          $ref: '#/components/schemas/Currency'
          description: Currency of the Amount of the transaction.
        referenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Reference date and time of the transaction.
            It must be intended as *settlementDate* for SCT and *acceptanceDtateTime* for SCTInst transactions.
        categoryPurpose:
          type: string
          description: Category Purpose of the transaction.
          minLength: 4
          maxLength: 4
        purposeCode:
          type: string
          description: Purpose Code of the transaction.
          minLength: 1
          maxLength: 4
      required:
        - serviceType
        - transactionId
        - debtorName
        - debtorBic
        - debtorIban
        - creditorName
        - creditorBic
        - creditorIban
        - amount
        - currency
        - referenceDateTime
    LEIType:
      type: string
      description: Code LEI (Legal Entity Identifier) ISO 17442
      examples:
        - 549300DTUYXVMJXZNY75
      pattern: ^[A-Z0-9]{18}[0-9]{2}$
      title: LEIType
    MessageCode:
      type: string
      enum:
        - FORMAT_ERROR
        - CLIENT_INVALID
        - CLIENT_INCONSISTENT
        - TIMESTAMP_INVALID
      title: MessageCode
    Max35Text:
      type: string
      minLength: 0
      maxLength: 35
      title: Max35Text
    Max70Text:
      type: string
      minLength: 0
      maxLength: 70
      title: Max70Text
    Max140Text:
      type: string
      minLength: 0
      maxLength: 140
      title: Max140Text
    Max256Text:
      type: string
      minLength: 0
      maxLength: 256
      title: Max256Text
    Max500Text:
      type: string
      minLength: 0
      maxLength: 500
      title: Max500Text
    Message:
      type: object
      description: |
        Basic structure for reporting messages. Typically used for providing descriptions about warnings and errors.
      examples:
        - messageType: WARNING
          messageCode: W001
          messageText: Partial outcome.
      title: Message
      properties:
        messageType:
          type: string
          description: Message type.
          enum:
            - INFO
            - WARNING
            - ERROR
        messageCode:
          type: string
          description: Message code.
        messageText:
          type: string
          description: Full textual description of the message.
      required:
        - messageType
        - messageCode
        - messageText
    ModelItem:
      type: object
      description: Structure with elements identifying a model item.
      title: ModelItem
      properties:
        modelName:
          $ref: '#/components/schemas/ModelName'
        modelVersion:
          $ref: '#/components/schemas/ModelVersion'
      required:
        - modelName
    ModelName:
      type: string
      description: |
        It's the name of a specific model. Together with the model version it becomes a unique identifier of a specific model.
      maxLength: 20
      title: ModelName
    ModelVersion:
      type: string
      description: |
        It states the version of model identified by modelName that has been applied.
      maxLength: 15
      title: ModelVersion
    ModelOutcome:
      type: string
      description: |
        Risk assessment Value produced by an applied FPAD's Model that can be provided in the outcome of a Prevention assessment (as part of a RiskInforArray). The format of the Value depends on the type of Model (to consult the structure of the Value produced by an FPAD Model, refer to the specific EBA CLEARING reference documentation).
      maxLength: 10
      title: ModelOutcome
    ModelNarratives:
      type: string
      description: |
        It is an optional attribute that can be provided in addition to the main Model Outcome expected from the result calculation of a Model.
        A *narrative* represents a single machine-readable code or a concatenation of multiple codes separated by the character "+" as a delimiter (e.g. LOWACT+FTMACC, where LOWACT stands for "LOW ACTIVITY" and FTMACC for "First-time account").
        The list of Narrative codes is defined by EBA CLEARING and provided to Participants in the reference documentation.
      maxLength: 120
      title: ModelNarratives
    NameMatchType:
      type: string
      enum:
        - MTCH
        - CMTC
        - NMTC
        - NOAP
      title: NameMatchType
    OrganisationIdentificationCode:
      type: string
      description: Specifies the external organisation identification scheme name code (maximum 4 characters) as defined in
        an external list (iso20022.org).
      examples:
        - BOID
      enum:
        - BANK
        - CBID
        - CHID
        - CINC
        - COID
        - CUST
        - DUNS
        - EMPL
        - GS1G
        - SREN
        - SRET
        - TXID
        - BDID
        - BOID
      title: OrganisationIdentificationCode
    PaginationInfo:
      type: object
      title: PaginationInfo
      properties:
        currentPage:
          type: integer
          description: Current page number.
        totalPages:
          type: integer
          description: Total number of pages, calculated by dividing the total number of reports retrieved by the number of
            items per page applied (rounded up).
        itemsPerPage:
          type: integer
          description: Number of items per page (as requested by the user or applied by default, if not specified).
        links:
          description: |
            HATEOAS block containing references to pagination links: prev, next, first, last, self.
          type: array
          items:
            $ref: '#/components/schemas/HateoasBlock'
      required:
        - currentPage
        - totalPages
        - itemsPerPage
        - links
    PartyIdMatchType:
      type: string
      enum:
        - MTCH
        - NMTC
        - NOAP
      title: PartyIdMatchType
    PartyType:
      type: object
      description: |
        Separation of the two kinds of identification into distinct structures ensures that the two sets of attributes are mutually exclusive.
        Mutual exclusion is verified by business rules executed after the json parsing.
      title: PartyType
      properties:
        name:
          $ref: '#/components/schemas/Max140Text'
        identification:
          type: object
          properties:
            organisationId:
              type: object
              properties:
                lei:
                  $ref: '#/components/schemas/LEIType'
                  description: Legal Entity Identifier.
                anyBIC:
                  $ref: '#/components/schemas/BICType'
                others:
                  description: |
                    Unique identification of an organisation, as assigned by an institution, using an identification scheme.
                    Usage Rule: only one entry to be used.
                  type: array
                  items:
                    $ref: '#/components/schemas/GenericOrganisationIdentification'
          required:
            - organisationId
    Ria:
      type: object
      description: |
        The Ria is a version of *RiskInfoArray* with compact attribute names to save space in bulk requests. It is an array where each item represents an assessed risk for the Account(s) under evaluation, according to the Participant's request. The item model is identified by the *modelName* and the *modelVersion* properties, while the risk assessment is identified by the *value* property.
      title: Ria
      properties:
        name:
          $ref: '#/components/schemas/ModelName'
        ver:
          $ref: '#/components/schemas/ModelVersion'
        out:
          $ref: '#/components/schemas/ModelOutcome'
        narr:
          $ref: '#/components/schemas/ModelNarratives'
      required:
        - name
        - ver
        - out
    RiskInfoArray:
      description: |
        The RiskInfoArray is an array where each item represents an assessed
        risk for the Account(s) under evaluation, according to the Participant's
        request. The item model is identified by the *modelName* and the
        *modelVersion* properties, while the risk assessment is identified by
        the *value* property.
      type: array
      items:
        type: object
        properties:
          modelName:
            $ref: '#/components/schemas/ModelName'
          modelVersion:
            $ref: '#/components/schemas/ModelVersion'
          modelOutcome:
            $ref: '#/components/schemas/ModelOutcome'
          modelNarratives:
            $ref: '#/components/schemas/ModelNarratives'
        required:
          - modelName
      title: RiskInfoArray
    ServiceType:
      type: string
      description: EBA CLEARING Service type (SCT, SCTInst).
      enum:
        - SCT
        - SCTInst
      title: ServiceType
    ShortErrorResponse:
      type: object
      description: |
        Compact version of ErrorResponse structure, used in bulk endpoints.
      title: ShortErrorResponse
      properties:
        xid:
          type: string
          description: The same *xid* sent in the bulk request, for matching purpose.
          format: uuid
        err:
          minItems: 1
          type: array
          items:
            type: object
            properties:
              dt:
                $ref: '#/components/schemas/DateTime'
              code:
                type: string
                description: A four character string representing the FPAD error code.
                minLength: 4
                maxLength: 4
              desc:
                type: string
                description: A string containing the error description.
            required:
              - dt
              - code
              - desc
    ShortMessage:
      type: object
      description: |
        Basic structure for reporting messages. Typically used for providing descriptions about warnings and errors.
      title: ShortMessage
      properties:
        type:
          type: string
          description: Message type.
          enum:
            - INFO
            - WARNING
            - ERROR
        code:
          type: string
          description: Message code.
        text:
          type: string
          description: Full textual description of the message.
      required:
        - type
        - code
        - text
    TransactionInvestigationReportFilter:
      type: object
      description: Data structure user as extraction filter for report request.
      title: TransactionInvestigationReportFilter
      properties:
        instructingAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: BIC of the instructing agent.
        instructedAgentBic:
          $ref: '#/components/schemas/Bic8'
          description: BIC of the instructed agent.
        serviceType:
          $ref: '#/components/schemas/ServiceType'
          description: Service Type of considered transactions.
        transactionId:
          type: string
          description: Unique identifier of the transaction.
          maxLength: 35
        debtorName:
          type: string
          description: |-
            Name associated with the Debtor's Account present in the transaction.
            All transactions starting with the value assigned will be considered.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: |-
            BIC of the Agent managing the Debtor's Account present in the transaction.
            If a 8 characters BIC is assigned as value, all transactions having a debtorBic starting with the same 8 characters will be considered.
        debtorIban:
          $ref: '#/components/schemas/Iban'
          description: IBAN of the debtor
        creditorName:
          type: string
          description: |-
            Name associated with the Creditor's Account present in the transaction.
             All transactions starting with the value assigned will be considered.
        creditorBic:
          $ref: '#/components/schemas/Bic'
          description: |-
            BIC of the Agent managing the Creditor's Account present in the transaction.
            If a 8 characters BIC is assigned as value, all transactions having a creditorBic starting with the same 8 characters will be considered.
        creditorIban:
          $ref: '#/components/schemas/Iban'
          description: |
            IBAN identifies the Creditor's Account present in the potential
            transaction that has to be assessed.
        minAmount:
          $ref: '#/components/schemas/Amount'
          description: Minumum amount of the transaction.
        maxAmount:
          $ref: '#/components/schemas/Amount'
          description: Maximum amount of the transaction.
        currency:
          $ref: '#/components/schemas/Currency'
          description: Currency of the Amount of the transaction.
        minReferenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Minimum reference date and time.
            Reference Date Time must be intended as *settlementDate* for SCT and *acceptanceDateTime* for SCTInst.
        maxReferenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |-
            Maximum reference date and time. It cannot exceed 3 days from *minReferenceDateTime*.
            Reference Date Time must be intended as *settlementDate* for SCT and *acceptanceDateTime* for SCTInst.
        minGeneralRiskIndicator:
          type: number
          description: |
            Minimum value admitted as General Risk Indicator (model
            *FPAD_RIA_RiskIndicator*).
        maxGeneralRiskIndicator:
          type: number
          description: |
            Maximum value admitted as General Risk Indicator (model
            *FPAD_RIA_RiskIndicator*).
    TransactionKey:
      type: object
      description: Basic structure with all key elements identifìying a transaction.
      examples:
        - serviceType: SCT
          debtorBic: FPADITMMXXX
          transactionId: 41e400e45
          referenceDateTime: '2019-08-24T14:15:22Z'
      title: TransactionKey
      properties:
        serviceType:
          $ref: '#/components/schemas/ServiceType'
          description: EBA CLEARING Service type associated with the transaction.
        debtorBic:
          $ref: '#/components/schemas/Bic'
          description: BIC of the Agent managing the Debtor's Account.
        transactionId:
          type: string
          description: 'Identifier of the transaction, unique for the Debtor''s Agent. '
          maxLength: 35
        referenceDateTime:
          $ref: '#/components/schemas/DateTime'
          description: |
            This attribute refers to:

            - Settlement date for SCT service type. If time is provided, it will
            be ignored.

            - Acceptance date and time for SCTInst service type. If time is
            missing, in this case, an error will be returned.
      required:
        - serviceType
        - debtorBic
        - transactionId
        - referenceDateTime
    VerificationOfPayeeResponse:
      type: object
      description: |
        Separation of the two kinds of responses in different structures allows constraints on code identification results and name inclusion.
        Mutual exclusion is verified by business rules executed after the json parsing.
        If the result of partyNameMatch is CMTC, then matchedName is mandatory and can only be used in this case.
      title: VerificationOfPayeeResponse
      properties:
        partyNameMatch:
          $ref: '#/components/schemas/NameMatchType'
        partyIdMatch:
          $ref: '#/components/schemas/PartyIdMatchType'
        matchedName:
          $ref: '#/components/schemas/Max140Text'
    VerificationOfPayeeError:
      type: object
      title: VerificationOfPayeeError
      properties:
        type:
          $ref: '#/components/schemas/Max70Text'
        code:
          $ref: '#/components/schemas/MessageCode'
          description: An entry provided by an external ISO code list.
        title:
          $ref: '#/components/schemas/Max70Text'
        status:
          type: integer
          enum:
            - '400'
            - '401'
            - '500'
        detail:
          $ref: '#/components/schemas/Max500Text'
        instance:
          $ref: '#/components/schemas/Max256Text'
      required:
        - type
        - code
    VerificationOfPayeeRequest:
      type: object
      title: VerificationOfPayeeRequest
      properties:
        party:
          $ref: '#/components/schemas/PartyType'
        partyAccount:
          $ref: '#/components/schemas/AccountType'
        partyAgent:
          $ref: '#/components/schemas/AgentType'
        unstructuredRemittanceInformation:
          description: |
            Additional information about AT-C001 sent by the Requester AT-C007,
            Usage Rule: only one entry may be used.
          type: array
          items:
            $ref: '#/components/schemas/Max140Text'
        requestingAgent:
          $ref: '#/components/schemas/AgentType'
      required:
        - party
        - partyAccount
        - partyAgent
        - requestingAgent
    VopBulkIdentification:
      type: object
      description: This object contains all info about the *identification* block of a VOP bulk request
      title: VopBulkIdentification
      properties:
        lei:
          $ref: '#/components/schemas/LEIType'
          description: Legal Entity Identifier of the party
        bic:
          $ref: '#/components/schemas/BICType'
          description: BIC of the party
        id:
          $ref: '#/components/schemas/Max256Text'
          description: |
            Identification: unique and unambiguous identification of an organisation.
        snc:
          $ref: '#/components/schemas/OrganisationIdentificationCode'
          description: |
            Scheme Name Code: an entry provided by an external ISO code list.
        snp:
          $ref: '#/components/schemas/Max35Text'
          description: |
            Scheme Name Proprietary: a scheme name defined in a proprietary way.
        iss:
          $ref: '#/components/schemas/Max35Text'
          description: Issuer of the identification.
    VopBulkRequest:
      type: object
      description: This object contains all fields to make request for a bulk vop
      title: VopBulkRequest
      properties:
        xid:
          type: string
          description: X-Request-ID used as Requesting PSP’s reference number in the VOP Request (T054).
          format: uuid
        rBic:
          $ref: '#/components/schemas/BICType'
          description: BIC of the requesting agent
        pBic:
          $ref: '#/components/schemas/BICType'
          description: BIC of the party agent
        iban:
          $ref: '#/components/schemas/IBANType'
          description: IBAN of the party account
        name:
          $ref: '#/components/schemas/Max140Text'
          description: Party name
        id:
          description: Party identification (may be used as an alternative to party name, not in combination)
          type: array
          items:
            $ref: '#/components/schemas/VopBulkIdentification'
      required:
        - xid
        - rBic
        - pBic
        - iban
    VopBulkResponse:
      type: object
      description: This object contains the reponse of a get bulk vop
      title: VopBulkResponse
      properties:
        xid:
          type: string
          description: |
            X-Request-ID used as Requesting PSP’s reference number in the VOP Request (T054).
            It can be used to match a request with a response in the bulk request.
          format: uuid
        fuid:
          type: string
          description: FPAD Unique Identifier (a UUID specified by RFC4122).
        fName:
          type: string
          description: FPAD Payee Name.
        ria:
          type: array
          items:
            $ref: '#/components/schemas/Ria'
        vPnm:
          $ref: '#/components/schemas/NameMatchType'
          description: VOP Party Name Match.
        vPim:
          $ref: '#/components/schemas/PartyIdMatchType'
          description: VOP Party Id Match.
        vName:
          $ref: '#/components/schemas/Max140Text'
          description: VOP matched name.
        msgs:
          description: Messages array.
          type: array
          items:
            $ref: '#/components/schemas/ShortMessage'
        vrts:
          type: string
          description: |
            VOP Response Time Stamp: Time stamp of provided by the responding PSP **(T061)**.
          examples:
            - 2024-08-12 15:19:22.678000+00:00
          format: date-time
      required:
        - xid
        - fuid
    VopBulkResponseCounter:
      type: object
      description: Counter for bulk responses having the same matching result.
      title: VopBulkResponseCounter
      properties:
        matchingResult:
          type: string
          description: |
            Matching value for successful responses, "ERROR" for responses returning 4xx/5xx status codes.
          enum:
            - MTCH
            - CMTC
            - NMTC
            - NOAP
            - ERROR
        counter:
          type: integer
          description: Number of responses having the matching value specified in *matchingResult*.
  responses:
    ErrorResponse_401:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Unauthorized:
              value: Unauthorized
    ErrorResponse_403:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Forbidden:
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value: Forbidden
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            Forbidden (application managed):
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value:
                errors:
                  dateTime: 2023-07-20 14:15:22+00:00
                  code: E403
                  description: The provided sender BIC is not authorized to perform this action.
    ErrorResponse_404:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Not Found:
              value: Not Found
    ErrorResponse_409:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            Conflict:
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value:
                errors:
                  dateTime: 2023-07-20 14:15:22+00:00
                  code: E409
                  description: The same PRI has already been sent.
    ErrorResponse_429:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Too many requests:
              value: Too many requests
    ErrorResponse_500:
      description: Response
      headers:
        fri:
          $ref: '#/components/headers/FpadResponseIdentifier'
      content:
        text/plain:
          schema:
            type: string
            description: Error message
          examples:
            Generic Error:
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value: Internal Server Error
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          examples:
            Generic Error (application managed):
              x-sandbox-request-name: OK
              x-sandbox-request-headers:
                senderBic: FPADITMM
                pri: a206e009-ef37-4040-924d-db758b29b401
              value:
                errors:
                  dateTime: 2023-07-20 14:15:22+00:00
                  code: E500
                  description: Application error.
